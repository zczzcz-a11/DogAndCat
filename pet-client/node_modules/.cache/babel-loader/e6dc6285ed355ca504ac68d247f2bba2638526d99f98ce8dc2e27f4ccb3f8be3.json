{"ast":null,"code":"import _objectSpread from \"E:/vue3/pet-home-master/pet-client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport { reactive, toRefs, onMounted } from 'vue';\nimport { toRelatedPage } from '@/router/tool.js';\nimport { useRouter } from 'vue-router';\nimport { userStore } from '@/store/user.js';\nexport default {\n  props: {\n    petItem: {\n      type: Object,\n      \"default\": {}\n    },\n    petCollect: {\n      type: Boolean,\n      \"default\": true\n    }\n  },\n  setup: function setup(props, ctx) {\n    var uStore = userStore();\n    var router = useRouter();\n    var state = reactive({\n      collect: false // 收藏状态\n    });\n\n    uStore.getCollectByPetId(props.petItem.petid).then(function (res) {\n      state.collect = res;\n    });\n    var toDetails = function toDetails() {\n      // 跳转宠物详情页面\n      var _props$petItem = props.petItem,\n        petid = _props$petItem.petid,\n        hostid = _props$petItem.hostid;\n      toRelatedPage('petSpace', router, 500, {\n        petid: petid,\n        hostid: hostid\n      });\n    };\n    var cardColl = function cardColl(id) {\n      // 点击心形收藏改变样式\n      uStore.setFondCollectSync(id).then(function (res) {\n        state.collect = res;\n      });\n    };\n    var isSheet = function isSheet(id) {\n      ctx.emit('open', {\n        type: true,\n        petid: id\n      });\n    };\n    return _objectSpread(_objectSpread({}, toRefs(state)), {}, {\n      cardColl: cardColl,\n      toDetails: toDetails,\n      isSheet: isSheet\n    });\n  }\n};","map":{"version":3,"names":["reactive","toRefs","onMounted","toRelatedPage","useRouter","userStore","props","petItem","type","Object","petCollect","Boolean","setup","ctx","uStore","router","state","collect","getCollectByPetId","petid","then","res","toDetails","_props$petItem","hostid","cardColl","id","setFondCollectSync","isSheet","emit","_objectSpread"],"sources":["E:\\vue3\\pet-home-master\\pet-client\\src\\components\\PetCard.vue"],"sourcesContent":["<template>\n  <div class=\"card ripple\" @click=\"toDetails\" ref=\"rippleBox\">\n    <div class=\"item_img\">\n      <van-image width=\"5rem\" height=\"4rem\" fit=\"cover\" :src=\"petItem.petimg\" show-loading />\n    </div>\n    <div class=\"item_content\">\n      <div class=\"wrap_left\">\n        <p class=\"name\">{{ petItem.petname }}</p>\n        <p>{{ petItem.petbreed }}（{{ petItem.petage }}岁）</p>\n      </div>\n      <div class=\"wrap_right\">\n        <div>\n          <i class=\"iconfont icon-sex\" :class=\"petItem.petsex == '1' ? 'icon-nan' : 'icon-nv'\"></i>\n        </div>\n        <div v-if=\"petCollect\" @click.stop=\"cardColl(petItem.petid)\" class=\"floatBox\" :class=\"collect ? 'fill' : ''\">\n          <i class=\"iconfont icon-xin2 iconColl2\" v-if=\"collect\"></i>\n          <i class=\"iconfont icon-xin2 iconColl1\" v-else></i>\n        </div>\n        <div class=\"exitCollect\" v-else @click.stop=\"isSheet(petItem.petid)\">\n          <i class=\"iconfont icon-diandian\" color=\"#95909c\"></i>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { reactive, toRefs, onMounted } from 'vue'\nimport { toRelatedPage } from '@/router/tool.js'\nimport { useRouter } from 'vue-router'\nimport { userStore } from '@/store/user.js'\n\nexport default {\n  props: {\n    petItem: {\n      type: Object,\n      default: {}\n    },\n    petCollect: {\n      type: Boolean,\n      default: true\n    }\n  },\n  setup(props, ctx) {\n    const uStore = userStore()\n    const router = useRouter()\n    const state = reactive({\n      collect: false // 收藏状态\n    })\n\n    uStore.getCollectByPetId(props.petItem.petid).then(res => {\n      state.collect = res\n    })\n\n    const toDetails = () => {\n      // 跳转宠物详情页面\n      const { petid, hostid } = props.petItem\n      toRelatedPage('petSpace', router, 500, { petid, hostid })\n    }\n\n    const cardColl = id => {\n      // 点击心形收藏改变样式\n      uStore.setFondCollectSync(id).then(res => {\n        state.collect = res\n      })\n    }\n\n    const isSheet = id => {\n      ctx.emit('open', { type: true, petid: id })\n    }\n\n    return {\n      ...toRefs(state),\n      cardColl,\n      toDetails,\n      isSheet\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.card {\n  width: 100%;\n  background-color: @primary-bg;\n  border-radius: 0.2rem;\n  box-shadow: rgba(0, 0, 0, 0.08) 0px 4px 12px;\n  // position: relative;\n  .button-ripple();\n\n  .item_img {\n    height: 4rem;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    overflow: hidden;\n    border-radius: 0.2rem 0.2rem 0.6rem 0.2rem;\n    background-color: @primary-bg;\n    .petimg {\n      height: 120%;\n    }\n  }\n  .item_content {\n    width: 100%;\n    padding: 0.1rem 0.28rem 0.3rem;\n    box-sizing: border-box;\n    display: flex;\n    justify-content: space-evenly;\n    .wrap_left {\n      flex: 1;\n      max-width: 70%;\n      font-size: 0.3rem;\n      color: @card-color;\n      line-height: 0.38rem;\n      overflow: hidden;\n      white-space: nowrap;\n      text-overflow: ellipsis;\n\n      .name {\n        font-size: 0.4rem;\n        line-height: 0.75rem;\n        color: #242424;\n        font-weight: bold;\n      }\n    }\n    .wrap_right {\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      align-items: center;\n      font-size: 0.5rem;\n      text-align: center;\n      .exitCollect {\n        transform: rotate(90deg);\n        & > i {\n          font-size: 0.45rem;\n          color: #86909c;\n        }\n      }\n      .icon-sex {\n        padding: 0.1rem;\n        border-radius: 50%;\n        position: absolute;\n        right: 0.2rem;\n        top: 0.2rem;\n      }\n      .icon-nan {\n        color: @icon-nan-color;\n        background-color: @icon-nan-bg;\n      }\n      .icon-nv {\n        color: @icon-nv-color;\n        background-color: @icon-nv-bg;\n      }\n\n      /* 放大 */\n      @keyframes banuce {\n        0% {\n          transform: scale(0.8);\n        }\n        100% {\n          transform: scale(1.5);\n        }\n      }\n      /* 缩放加透明度变化 */\n      @keyframes circle {\n        0% {\n          transform: scale(0.2);\n          opacity: 0.8;\n        }\n        100% {\n          transform: scale(1.5);\n          opacity: 1;\n        }\n      }\n      /* 出现。用opacity来控制元素隐藏显示 */\n      @keyframes show {\n        0% {\n          opacity: 1;\n        }\n      }\n      .fill {\n        position: relative;\n        display: inline-block;\n        animation: banuce 0.2s ease 0s 2 alternate;\n      }\n      .fill::before {\n        content: '';\n        width: 0.7rem;\n        height: 0.7rem;\n        position: absolute;\n        left: -0.07rem;\n        top: -0.12rem;\n        border-radius: 50%;\n        background: rgba(254, 1, 1, 0.1);\n        opacity: 0;\n        animation: circle 0.3s ease 0.02s 1 alternate;\n      }\n      .fill::after {\n        content: '';\n        width: 10%;\n        height: 10%;\n        position: absolute;\n        left: 50%;\n        top: 50%;\n        transform: translate(-50%, 0%);\n        border-radius: 50%;\n        background: transparent;\n        box-shadow: 15px -15px 0 #ff735e, 15px 15px 0 #ff735e, -15px -15px 0 #ff735e, -15px 15px 0 #ff735e;\n        opacity: 0;\n        animation: show 0.2s steps(1, end) 0s 1;\n      }\n      .iconColl1 {\n        font-size: 0.5rem;\n        color: #d8d8d8;\n      }\n      .iconColl2 {\n        font-size: 0.5rem;\n        color: #ff6969;\n      }\n    }\n  }\n}\n</style>\n"],"mappings":";AA2BA,SAASA,QAAQ,EAAEC,MAAM,EAAEC,SAAQ,QAAS,KAAI;AAChD,SAASC,aAAY,QAAS,kBAAiB;AAC/C,SAASC,SAAQ,QAAS,YAAW;AACrC,SAASC,SAAQ,QAAS,iBAAgB;AAE1C,eAAe;EACbC,KAAK,EAAE;IACLC,OAAO,EAAE;MACPC,IAAI,EAAEC,MAAM;MACZ,WAAS,CAAC;IACZ,CAAC;IACDC,UAAU,EAAE;MACVF,IAAI,EAAEG,OAAO;MACb,WAAS;IACX;EACF,CAAC;EACDC,KAAK,WAAAA,MAACN,KAAK,EAAEO,GAAG,EAAE;IAChB,IAAMC,MAAK,GAAIT,SAAS,EAAC;IACzB,IAAMU,MAAK,GAAIX,SAAS,EAAC;IACzB,IAAMY,KAAI,GAAIhB,QAAQ,CAAC;MACrBiB,OAAO,EAAE,KAAI,CAAE;IACjB,CAAC;;IAEDH,MAAM,CAACI,iBAAiB,CAACZ,KAAK,CAACC,OAAO,CAACY,KAAK,CAAC,CAACC,IAAI,CAAC,UAAAC,GAAE,EAAK;MACxDL,KAAK,CAACC,OAAM,GAAII,GAAE;IACpB,CAAC;IAED,IAAMC,SAAQ,GAAI,SAAZA,SAAQA,CAAA,EAAU;MACtB;MACA,IAAAC,cAAA,GAA0BjB,KAAK,CAACC,OAAM;QAA9BY,KAAK,GAAAI,cAAA,CAALJ,KAAK;QAAEK,MAAK,GAAAD,cAAA,CAALC,MAAK;MACpBrB,aAAa,CAAC,UAAU,EAAEY,MAAM,EAAE,GAAG,EAAE;QAAEI,KAAK,EAALA,KAAK;QAAEK,MAAK,EAALA;MAAO,CAAC;IAC1D;IAEA,IAAMC,QAAO,GAAI,SAAXA,QAAOA,CAAIC,EAAC,EAAK;MACrB;MACAZ,MAAM,CAACa,kBAAkB,CAACD,EAAE,CAAC,CAACN,IAAI,CAAC,UAAAC,GAAE,EAAK;QACxCL,KAAK,CAACC,OAAM,GAAII,GAAE;MACpB,CAAC;IACH;IAEA,IAAMO,OAAM,GAAI,SAAVA,OAAMA,CAAIF,EAAC,EAAK;MACpBb,GAAG,CAACgB,IAAI,CAAC,MAAM,EAAE;QAAErB,IAAI,EAAE,IAAI;QAAEW,KAAK,EAAEO;MAAG,CAAC;IAC5C;IAEA,OAAAI,aAAA,CAAAA,aAAA,KACK7B,MAAM,CAACe,KAAK,CAAC;MAChBS,QAAQ,EAARA,QAAQ;MACRH,SAAS,EAATA,SAAS;MACTM,OAAM,EAANA;IAAM;EAEV;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}