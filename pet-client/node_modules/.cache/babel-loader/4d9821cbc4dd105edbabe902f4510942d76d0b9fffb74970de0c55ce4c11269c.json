{"ast":null,"code":"import _objectSpread from \"E:/vue3/pet-home-master/pet-client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport { reactive, toRefs, onMounted, computed } from \"vue\";\nimport { toRelatedPage } from \"@/router/tool.js\";\nimport { useRouter } from \"vue-router\";\nimport { userStore } from \"@/store/user.js\";\nimport { Dialog } from \"vant\";\nexport default {\n  beforeCreate: function beforeCreate() {\n    var uStore = userStore(); // 仓库的上下文对象\n    if (uStore.getUserName() === \"\") {\n      uStore.getUserInfoSync();\n    }\n  },\n  setup: function setup() {\n    var uStore = userStore(); // 仓库的上下文对象\n    var router = useRouter(); // 得到路由实例\n\n    var state = reactive({\n      // userInfo: {}\n      pageInfo: [{\n        name: \"records\",\n        content: \"编辑信息\",\n        url: \"/updatauser\"\n      }, {\n        name: \"like-o\",\n        content: \"我的宠物\",\n        url: \"/mypet\"\n      }, {\n        name: \"add-o\",\n        content: \"添加宠物\",\n        url: \"/add\"\n      }, {\n        name: \"question-o\",\n        content: \"帮助\",\n        url: \"/\"\n      }],\n      queryInfo: {\n        userId: uStore.getUserId()\n      }\n    });\n    onMounted(function () {\n      if (uStore.getPetInfo().length === 0) {\n        uStore.getPetInfoSync();\n      }\n    });\n    var toUserInfo = function toUserInfo() {\n      console.log(\"修改个人信息\");\n    };\n    var toUserPet = function toUserPet() {\n      // console.log('我的宠物');\n      router.push(\"/mypet\");\n    };\n    var toAddPet = function toAddPet() {\n      // console.log('添加宠物');\n      router.push(\"/add\");\n    };\n    var toHelp = function toHelp() {\n      console.log(\"帮助\");\n    };\n    var toExit = function toExit() {\n      // console.log('退出');\n      Dialog.confirm({\n        message: \"确定要退出登录吗？\"\n      }).then(function () {\n        uStore.emptyState();\n        uStore.socketDisconnect();\n        router.push(\"/login\");\n      });\n    };\n    var userInfo = computed(function () {\n      var name = uStore.getUserName();\n      var img = uStore.getUserImg();\n      var sign = uStore.getUserSign();\n      if (img === \"\" || img === null) img = \"user_001\";\n      if (sign === \"\" || sign === null) sign = \"今日份营业汪 ! ! !\";\n      return {\n        name: name,\n        img: img,\n        sign: sign\n      };\n    });\n    return _objectSpread(_objectSpread({}, toRefs(state)), {}, {\n      toUserInfo: toUserInfo,\n      toUserPet: toUserPet,\n      toAddPet: toAddPet,\n      toHelp: toHelp,\n      toExit: toExit,\n      toRelatedPage: toRelatedPage,\n      router: router,\n      userInfo: userInfo\n    });\n  }\n};","map":{"version":3,"names":["reactive","toRefs","onMounted","computed","toRelatedPage","useRouter","userStore","Dialog","beforeCreate","uStore","getUserName","getUserInfoSync","setup","router","state","pageInfo","name","content","url","queryInfo","userId","getUserId","getPetInfo","length","getPetInfoSync","toUserInfo","console","log","toUserPet","push","toAddPet","toHelp","toExit","confirm","message","then","emptyState","socketDisconnect","userInfo","img","getUserImg","sign","getUserSign","_objectSpread"],"sources":["E:\\vue3\\pet-home-master\\pet-client\\src\\views\\user\\index.vue"],"sourcesContent":["<!-- eslint-disable vue/multi-word-component-names -->\n<template>\n  <div class=\"page\">\n    <div class=\"header\">\n      <div class=\"info_img\">\n        <div class=\"img_wrap\">\n          <van-image\n            width=\"2rem\"\n            height=\"2rem\"\n            fit=\"cover\"\n            :src=\"require('@/assets/imgs/user_photo/' + userInfo.img + '.png')\"\n          />\n        </div>\n      </div>\n      <div class=\"info_content\">\n        <div class=\"info_name\">\n          <span class=\"name\">{{ userInfo.name }}</span>\n          <van-icon name=\"vip-card-o\" color=\"#f8b158\" size=\".8rem\" />\n        </div>\n        <div class=\"info_brief\">\n          <span>{{ userInfo.sign }}</span>\n        </div>\n      </div>\n      <div\n        class=\"info_space\"\n        @click=\"toRelatedPage('userSpace', router, 0, queryInfo)\"\n      >\n        <span>个人空间 ></span>\n      </div>\n    </div>\n\n    <div class=\"content_wrap\">\n      <div class=\"main\">\n        <div\n          class=\"item\"\n          v-for=\"item in pageInfo\"\n          :key=\"item\"\n          @click=\"toRelatedPage(item.url, router)\"\n        >\n          <van-icon :name=\"item.name\" color=\"#8d9f5e\" />\n          <p>{{ item.content }}</p>\n        </div>\n\n        <div class=\"item\" @click=\"toExit\">\n          <van-icon name=\"warning-o\" color=\"#8d9f5e\" />\n          <p>退出</p>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { reactive, toRefs, onMounted, computed } from \"vue\";\nimport { toRelatedPage } from \"@/router/tool.js\";\nimport { useRouter } from \"vue-router\";\nimport { userStore } from \"@/store/user.js\";\nimport { Dialog } from \"vant\";\n\nexport default {\n  beforeCreate() {\n    const uStore = userStore(); // 仓库的上下文对象\n    if (uStore.getUserName() === \"\") {\n      uStore.getUserInfoSync();\n    }\n  },\n  setup() {\n    const uStore = userStore(); // 仓库的上下文对象\n    const router = useRouter(); // 得到路由实例\n\n    const state = reactive({\n      // userInfo: {}\n      pageInfo: [\n        {\n          name: \"records\",\n          content: \"编辑信息\",\n          url: \"/updatauser\",\n        },\n        {\n          name: \"like-o\",\n          content: \"我的宠物\",\n          url: \"/mypet\",\n        },\n        {\n          name: \"add-o\",\n          content: \"添加宠物\",\n          url: \"/add\",\n        },\n        {\n          name: \"question-o\",\n          content: \"帮助\",\n          url: \"/\",\n        },\n      ],\n      queryInfo: {\n        userId: uStore.getUserId(),\n      },\n    });\n\n    onMounted(() => {\n      if (uStore.getPetInfo().length === 0) {\n        uStore.getPetInfoSync();\n      }\n    });\n\n    const toUserInfo = () => {\n      console.log(\"修改个人信息\");\n    };\n\n    const toUserPet = () => {\n      // console.log('我的宠物');\n      router.push(\"/mypet\");\n    };\n\n    const toAddPet = () => {\n      // console.log('添加宠物');\n      router.push(\"/add\");\n    };\n\n    const toHelp = () => {\n      console.log(\"帮助\");\n    };\n\n    const toExit = () => {\n      // console.log('退出');\n      Dialog.confirm({\n        message: \"确定要退出登录吗？\",\n      }).then(() => {\n        uStore.emptyState();\n        uStore.socketDisconnect();\n        router.push(\"/login\");\n      });\n    };\n\n    const userInfo = computed(() => {\n      let name = uStore.getUserName();\n      let img = uStore.getUserImg();\n      let sign = uStore.getUserSign();\n      if (img === \"\" || img === null) img = \"user_001\";\n      if (sign === \"\" || sign === null) sign = \"今日份营业汪 ! ! !\";\n      return { name, img, sign };\n    });\n\n    return {\n      ...toRefs(state),\n      toUserInfo,\n      toUserPet,\n      toAddPet,\n      toHelp,\n      toExit,\n      toRelatedPage,\n      router,\n      userInfo,\n    };\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.page {\n  width: 100%;\n  height: 100%;\n  background-color: @primary;\n  display: flex;\n  flex-direction: column;\n  .header {\n    width: 100%;\n    // height: 25%;\n    padding: 20px;\n    box-sizing: border-box;\n    display: flex;\n    justify-content: space-evenly;\n    color: @color-text-header;\n    .info_img {\n      // margin: 0 auto;\n      .img_wrap {\n        width: 2rem;\n        height: 2rem;\n        border: 2px solid #fff;\n        border-radius: 10px;\n        overflow: hidden;\n\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        .img {\n          width: 110%;\n        }\n      }\n    }\n    .info_content {\n      flex: 1;\n      margin-left: 15px;\n      .info_name {\n        padding-bottom: 0.2rem;\n        display: flex;\n        align-items: center;\n        .name {\n          font-size: 0.5rem;\n          font-weight: 800;\n          margin-right: 0.3rem;\n          max-width: 3rem;\n          .line-clamp1();\n        }\n      }\n      .info_brief {\n        font-size: 0.2rem;\n        line-height: 0.4rem;\n        font-weight: lighter;\n        max-width: 4.5rem;\n        .line-clamp2();\n      }\n    }\n    .info_space {\n      display: flex;\n      align-items: center;\n      margin-left: 10px;\n      & > span {\n        font-size: 0.33rem;\n        font-weight: 600;\n      }\n    }\n  }\n  .content_wrap {\n    width: 100%;\n    flex: 1;\n    background-color: @primary-bg;\n    border-radius: 32px 32px 0 0;\n    border-top: 4px solid #683931;\n    padding: 40px 10px;\n    box-sizing: border-box;\n    .main {\n      width: 100%;\n      .item {\n        display: flex;\n        font-size: 0.7rem;\n        padding: 0.4rem 0.4rem;\n        box-sizing: border-box;\n        .button-ripple();\n        p {\n          color: #1e1e1e;\n          font-size: 0.5rem;\n          line-height: 0.7rem;\n          margin-left: 0.3rem;\n        }\n      }\n    }\n  }\n}\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}