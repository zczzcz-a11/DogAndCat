{"ast":null,"code":"import _objectSpread from \"E:/vue3/pet-home-master/pet-client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport PageHeadVue from \"@/components/PageHead.vue\";\nimport ImgGridVue from \"./components/ImgGrid\";\nimport { reactive, toRefs } from \"vue\";\nimport { useRoute, useRouter } from \"vue-router\";\nimport { userSpaceById } from '@/axios/index.js';\nimport { toRelatedPage } from \"@/router/tool.js\";\nimport { userStore } from \"@/store/user.js\";\nimport { Toast } from 'vant';\nexport default {\n  setup: function setup(props) {\n    var route = useRoute();\n    var router = useRouter();\n    var uStore = userStore();\n    var userId = route.query.userId;\n    var state = reactive({\n      pageName: \"个人空间\",\n      userInfo: {\n        userimg: 'user_001'\n      },\n      petInfo: [],\n      fondInfo: [],\n      queryInfo: {}\n    });\n    var toChatPage = function toChatPage() {\n      var name = uStore.getUserName();\n      if (name === state.userInfo.username) {\n        Toast.fail('不可以向自己发消息');\n      } else {\n        toRelatedPage('chatPage', router, 500, state.queryInfo);\n      }\n    };\n    var userSpaceByIdSync = function userSpaceByIdSync(id) {\n      userSpaceById(id).then(function (res) {\n        state.userInfo = res.data.userInfo;\n        state.petInfo = res.data.petInfo;\n        state.fondInfo = res.data.fondinfo;\n        state.queryInfo = {\n          chatId: res.data.userInfo.id,\n          chatName: res.data.userInfo.username,\n          chatImg: res.data.userInfo.userimg\n        };\n        uStore.getChatListSync().then(function (result) {\n          if (result) {\n            var chatList = uStore.getChatList();\n            state.queryInfo.listId = '';\n            chatList.forEach(function (item) {\n              if (item.userId == state.queryInfo.chatId) {\n                state.queryInfo.listId = item.id;\n              }\n            });\n          }\n          ;\n        });\n      });\n    };\n    userSpaceByIdSync({\n      userId: userId\n    });\n    return _objectSpread(_objectSpread({}, toRefs(state)), {}, {\n      router: router,\n      toRelatedPage: toRelatedPage,\n      toChatPage: toChatPage\n    });\n  },\n  components: {\n    PageHeadVue: PageHeadVue,\n    ImgGridVue: ImgGridVue\n  }\n};","map":{"version":3,"names":["PageHeadVue","ImgGridVue","reactive","toRefs","useRoute","useRouter","userSpaceById","toRelatedPage","userStore","Toast","setup","props","route","router","uStore","userId","query","state","pageName","userInfo","userimg","petInfo","fondInfo","queryInfo","toChatPage","name","getUserName","username","fail","userSpaceByIdSync","id","then","res","data","fondinfo","chatId","chatName","chatImg","getChatListSync","result","chatList","getChatList","listId","forEach","item","_objectSpread","components"],"sources":["E:\\vue3\\pet-home-master\\pet-client\\src\\pages\\userSpace\\index.vue"],"sourcesContent":["<template>\n  <div class=\"page\">\n    <PageHeadVue :name=\"pageName\" />\n\n    <div class=\"user_wrap\">\n      <div class=\"img_wrap\">\n        <van-image\n          width=\"3rem\"\n          height=\"3rem\"\n          fit=\"cover\"\n          :src=\"require('@/assets/imgs/user_photo/' + userInfo.userimg + '.png')\"\n        />\n        <div class=\"text_wrap\">\n          <div class=\"name\">{{userInfo.username}}</div>\n          <div class=\"sign\">{{userInfo.usersign}}</div>\n        </div>\n      </div>\n\n      <div class=\"button_wrap\">\n        <van-button\n          round\n          block\n          type=\"primary\"\n          native-type=\"submit\"\n          color=\"#f8b158\"\n          @click=\"toChatPage\"\n        >\n          发消息\n        </van-button>\n      </div>\n    </div>\n\n    <div class=\"content_wrap\">\n      <van-tabs\n        active=\"{{ active }}\"\n        bind:change=\"onChange\"\n        type=\"card\"\n        swipeable\n      >\n        <van-tab title=\"他的\">\n          <ImgGridVue :petInfo=\"petInfo\" />\n        </van-tab>\n        <van-tab title=\"喜欢\">\n          <ImgGridVue :petInfo=\"fondInfo\"/>\n        </van-tab>\n      </van-tabs>\n    </div>\n  </div>\n</template>\n\n<script>\nimport PageHeadVue from \"@/components/PageHead.vue\";\nimport ImgGridVue from \"./components/ImgGrid\";\nimport { reactive, toRefs } from \"vue\";\nimport { useRoute, useRouter } from \"vue-router\";\nimport { userSpaceById } from '@/axios/index.js';\nimport { toRelatedPage } from \"@/router/tool.js\";\nimport { userStore } from \"@/store/user.js\";\nimport { Toast } from 'vant';\n\nexport default {\n  setup(props) {\n    const route = useRoute();\n    const router = useRouter();\n    const uStore = userStore();\n    const userId = route.query.userId;\n    const state = reactive({\n      pageName: \"个人空间\",\n      userInfo: {\n        userimg: 'user_001'\n      },\n      petInfo: [],\n      fondInfo: [],\n      queryInfo: {},\n    });\n\n    const toChatPage = () => {\n      const name = uStore.getUserName();\n      if(name === state.userInfo.username){\n        Toast.fail('不可以向自己发消息');\n      }else{\n        toRelatedPage('chatPage', router, 500, state.queryInfo);\n      }\n    }\n    \n    const userSpaceByIdSync = id => {\n      userSpaceById(id).then( res=> {\n        state.userInfo = res.data.userInfo;\n        state.petInfo = res.data.petInfo;\n        state.fondInfo = res.data.fondinfo;\n        state.queryInfo = {\n          chatId: res.data.userInfo.id,\n          chatName: res.data.userInfo.username,\n          chatImg: res.data.userInfo.userimg\n        };\n\n        uStore.getChatListSync().then(result => {\n          if(result){\n            const chatList = uStore.getChatList();\n            state.queryInfo.listId = '';\n            chatList.forEach(item => {\n              if(item.userId == state.queryInfo.chatId){\n                state.queryInfo.listId = item.id;\n              }\n            });\n          };\n        })\n      });\n    }\n    userSpaceByIdSync({userId});\n\n\n    \n    return {\n      ...toRefs(state),\n      router,      \n      toRelatedPage,\n      toChatPage,\n    };\n  },\n  components: {\n    PageHeadVue,\n    ImgGridVue,\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.page {\n  width: 100%;\n  height: 100%;\n  background-color: @primary;\n  overflow: scroll;\n  .user_wrap {\n    width: 100%;\n    height: 7rem;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-evenly;\n    align-items: center;\n    animation: circle .6s ease 0.02s 1 alternate;\n    .img_wrap {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      .van-image {\n        margin: 0 auto;\n        border-radius: 50%;\n        overflow: hidden;\n      }\n      .text_wrap {\n        margin-top: 0.3rem;\n        text-align: center;\n        .name {\n          color: #fff;\n          font-size: 0.5rem;\n          font-weight: 800;\n          line-height: 0.8rem;\n          margin: 0 auto;\n          max-width: 3rem;\n          .line-clamp1();\n        }\n        .sign {\n          max-width: 6rem;\n          line-height: 0.32rem;\n          font-size: 0.3rem;\n          color: #d1e6a1;\n          .line-clamp2();\n        }\n      }\n    }\n    .button_wrap {\n      width: 30%;\n      font-size: 0.5rem;\n      font-weight: 800;\n    }\n  }\n  .content_wrap {\n    width: 100%;\n    min-height: calc(100% - 8.6rem);\n    background-color: #fff;\n    border-radius: 32px 32px 0 0;\n    border-top: 4px solid #683931;\n    padding: 30px 0px;\n    box-sizing: border-box;\n    animation: move .7s ease 0s 1 alternate;\n    :deep(.van-tabs__wrap) {\n      height: 1rem;\n      .van-tabs__nav {\n        height: 100%;\n        padding: 0.1rem;\n        box-sizing: border-box;\n        border: none;\n        background-color: @primary;\n        border-radius: 0.5rem;\n        .van-tab {\n          font-size: 0.4rem;\n          font-weight: 800;\n          color: #fff;\n          border: none;\n          letter-spacing: 0.3rem;\n          text-indent: 0.3rem;\n        }\n        .van-tab--active {\n          color: @button-bg;\n          background-color: #fff;\n          border-radius: 0.5rem;\n        }\n      }\n    }\n  }\n}\n@keyframes move {\n  0% {\n    transform: translateY(30%);\n    opacity: .2;\n  }\n  100% {\n    transform: translateY(0);\n    opacity: 1;\n  }\n}\n@keyframes circle {\n  0% {\n    transform: scale(0.2);\n    opacity: 0;\n  }\n  100% {\n    transform: scale(1);\n    opacity: 1;\n  }\n}\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}