{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, withModifiers as _withModifiers, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nvar _withScopeId = function _withScopeId(n) {\n  return _pushScopeId(\"data-v-4d442b4f\"), n = n(), _popScopeId(), n;\n};\nvar _hoisted_1 = {\n  \"class\": \"item_img\"\n};\nvar _hoisted_2 = {\n  \"class\": \"item_content\"\n};\nvar _hoisted_3 = {\n  \"class\": \"wrap_left\"\n};\nvar _hoisted_4 = {\n  \"class\": \"name\"\n};\nvar _hoisted_5 = {\n  \"class\": \"wrap_right\"\n};\nvar _hoisted_6 = {\n  key: 0,\n  \"class\": \"iconfont icon-xin2 iconColl2\"\n};\nvar _hoisted_7 = {\n  key: 1,\n  \"class\": \"iconfont icon-xin2 iconColl1\"\n};\nvar _hoisted_8 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"i\", {\n    \"class\": \"iconfont icon-diandian\",\n    color: \"#95909c\"\n  }, null, -1 /* HOISTED */);\n});\nvar _hoisted_9 = [_hoisted_8];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_van_image = _resolveComponent(\"van-image\");\n  return _openBlock(), _createElementBlock(\"div\", {\n    \"class\": \"card ripple\",\n    onClick: _cache[2] || (_cache[2] = function () {\n      return $setup.toDetails && $setup.toDetails.apply($setup, arguments);\n    }),\n    ref: \"rippleBox\"\n  }, [_createElementVNode(\"div\", _hoisted_1, [_createVNode(_component_van_image, {\n    width: \"5rem\",\n    height: \"4rem\",\n    fit: \"cover\",\n    src: $props.petItem.petimg,\n    \"show-loading\": \"\"\n  }, null, 8 /* PROPS */, [\"src\"])]), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"p\", _hoisted_4, _toDisplayString($props.petItem.petname), 1 /* TEXT */), _createElementVNode(\"p\", null, _toDisplayString($props.petItem.petbreed) + \"（\" + _toDisplayString($props.petItem.petage) + \"岁）\", 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", null, [_createElementVNode(\"i\", {\n    \"class\": _normalizeClass([\"iconfont icon-sex\", $props.petItem.petsex == '1' ? 'icon-nan' : 'icon-nv'])\n  }, null, 2 /* CLASS */)]), $props.petCollect ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 0,\n    onClick: _cache[0] || (_cache[0] = _withModifiers(function ($event) {\n      return $setup.cardColl($props.petItem.petid);\n    }, [\"stop\"])),\n    \"class\": _normalizeClass([\"floatBox\", _ctx.collect ? 'fill' : ''])\n  }, [_ctx.collect ? (_openBlock(), _createElementBlock(\"i\", _hoisted_6)) : (_openBlock(), _createElementBlock(\"i\", _hoisted_7))], 2 /* CLASS */)) : (_openBlock(), _createElementBlock(\"div\", {\n    key: 1,\n    \"class\": \"exitCollect\",\n    onClick: _cache[1] || (_cache[1] = _withModifiers(function ($event) {\n      return $setup.isSheet($props.petItem.petid);\n    }, [\"stop\"]))\n  }, _hoisted_9))])])], 512 /* NEED_PATCH */);\n}","map":{"version":3,"names":["_createElementVNode","color","_hoisted_8","_createElementBlock","onClick","_cache","$setup","toDetails","apply","arguments","ref","_hoisted_1","_createVNode","_component_van_image","width","height","fit","src","$props","petItem","petimg","_hoisted_2","_hoisted_3","_hoisted_4","_toDisplayString","petname","petbreed","petage","_hoisted_5","_normalizeClass","petsex","petCollect","_withModifiers","$event","cardColl","petid","_ctx","collect","_hoisted_6","_hoisted_7","isSheet"],"sources":["E:\\vue3\\pet-home-master\\pet-client\\src\\components\\PetCard.vue"],"sourcesContent":["<template>\n  <div class=\"card ripple\" @click=\"toDetails\" ref=\"rippleBox\">\n    <div class=\"item_img\">\n      <van-image width=\"5rem\" height=\"4rem\" fit=\"cover\" :src=\"petItem.petimg\" show-loading />\n    </div>\n    <div class=\"item_content\">\n      <div class=\"wrap_left\">\n        <p class=\"name\">{{ petItem.petname }}</p>\n        <p>{{ petItem.petbreed }}（{{ petItem.petage }}岁）</p>\n      </div>\n      <div class=\"wrap_right\">\n        <div>\n          <i class=\"iconfont icon-sex\" :class=\"petItem.petsex == '1' ? 'icon-nan' : 'icon-nv'\"></i>\n        </div>\n        <div v-if=\"petCollect\" @click.stop=\"cardColl(petItem.petid)\" class=\"floatBox\" :class=\"collect ? 'fill' : ''\">\n          <i class=\"iconfont icon-xin2 iconColl2\" v-if=\"collect\"></i>\n          <i class=\"iconfont icon-xin2 iconColl1\" v-else></i>\n        </div>\n        <div class=\"exitCollect\" v-else @click.stop=\"isSheet(petItem.petid)\">\n          <i class=\"iconfont icon-diandian\" color=\"#95909c\"></i>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { reactive, toRefs, onMounted } from 'vue'\nimport { toRelatedPage } from '@/router/tool.js'\nimport { useRouter } from 'vue-router'\nimport { userStore } from '@/store/user.js'\n\nexport default {\n  props: {\n    petItem: {\n      type: Object,\n      default: {}\n    },\n    petCollect: {\n      type: Boolean,\n      default: true\n    }\n  },\n  setup(props, ctx) {\n    const uStore = userStore()\n    const router = useRouter()\n    const state = reactive({\n      collect: false // 收藏状态\n    })\n\n    uStore.getCollectByPetId(props.petItem.petid).then(res => {\n      state.collect = res\n    })\n\n    const toDetails = () => {\n      // 跳转宠物详情页面\n      const { petid, hostid } = props.petItem\n      toRelatedPage('petSpace', router, 500, { petid, hostid })\n    }\n\n    const cardColl = id => {\n      // 点击心形收藏改变样式\n      uStore.setFondCollectSync(id).then(res => {\n        state.collect = res\n      })\n    }\n\n    const isSheet = id => {\n      ctx.emit('open', { type: true, petid: id })\n    }\n\n    return {\n      ...toRefs(state),\n      cardColl,\n      toDetails,\n      isSheet\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.card {\n  width: 100%;\n  background-color: @primary-bg;\n  border-radius: 0.2rem;\n  box-shadow: rgba(0, 0, 0, 0.08) 0px 4px 12px;\n  // position: relative;\n  .button-ripple();\n\n  .item_img {\n    height: 4rem;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    overflow: hidden;\n    border-radius: 0.2rem 0.2rem 0.6rem 0.2rem;\n    background-color: @primary-bg;\n    .petimg {\n      height: 120%;\n    }\n  }\n  .item_content {\n    width: 100%;\n    padding: 0.1rem 0.28rem 0.3rem;\n    box-sizing: border-box;\n    display: flex;\n    justify-content: space-evenly;\n    .wrap_left {\n      flex: 1;\n      max-width: 70%;\n      font-size: 0.3rem;\n      color: @card-color;\n      line-height: 0.38rem;\n      overflow: hidden;\n      white-space: nowrap;\n      text-overflow: ellipsis;\n\n      .name {\n        font-size: 0.4rem;\n        line-height: 0.75rem;\n        color: #242424;\n        font-weight: bold;\n      }\n    }\n    .wrap_right {\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      align-items: center;\n      font-size: 0.5rem;\n      text-align: center;\n      .exitCollect {\n        transform: rotate(90deg);\n        & > i {\n          font-size: 0.45rem;\n          color: #86909c;\n        }\n      }\n      .icon-sex {\n        padding: 0.1rem;\n        border-radius: 50%;\n        position: absolute;\n        right: 0.2rem;\n        top: 0.2rem;\n      }\n      .icon-nan {\n        color: @icon-nan-color;\n        background-color: @icon-nan-bg;\n      }\n      .icon-nv {\n        color: @icon-nv-color;\n        background-color: @icon-nv-bg;\n      }\n\n      /* 放大 */\n      @keyframes banuce {\n        0% {\n          transform: scale(0.8);\n        }\n        100% {\n          transform: scale(1.5);\n        }\n      }\n      /* 缩放加透明度变化 */\n      @keyframes circle {\n        0% {\n          transform: scale(0.2);\n          opacity: 0.8;\n        }\n        100% {\n          transform: scale(1.5);\n          opacity: 1;\n        }\n      }\n      /* 出现。用opacity来控制元素隐藏显示 */\n      @keyframes show {\n        0% {\n          opacity: 1;\n        }\n      }\n      .fill {\n        position: relative;\n        display: inline-block;\n        animation: banuce 0.2s ease 0s 2 alternate;\n      }\n      .fill::before {\n        content: '';\n        width: 0.7rem;\n        height: 0.7rem;\n        position: absolute;\n        left: -0.07rem;\n        top: -0.12rem;\n        border-radius: 50%;\n        background: rgba(254, 1, 1, 0.1);\n        opacity: 0;\n        animation: circle 0.3s ease 0.02s 1 alternate;\n      }\n      .fill::after {\n        content: '';\n        width: 10%;\n        height: 10%;\n        position: absolute;\n        left: 50%;\n        top: 50%;\n        transform: translate(-50%, 0%);\n        border-radius: 50%;\n        background: transparent;\n        box-shadow: 15px -15px 0 #ff735e, 15px 15px 0 #ff735e, -15px -15px 0 #ff735e, -15px 15px 0 #ff735e;\n        opacity: 0;\n        animation: show 0.2s steps(1, end) 0s 1;\n      }\n      .iconColl1 {\n        font-size: 0.5rem;\n        color: #d8d8d8;\n      }\n      .iconColl2 {\n        font-size: 0.5rem;\n        color: #ff6969;\n      }\n    }\n  }\n}\n</style>\n"],"mappings":";;;;;EAES,SAAM;AAAU;;EAGhB,SAAM;AAAc;;EAClB,SAAM;AAAW;;EACjB,SAAM;AAAM;;EAGZ,SAAM;AAAY;;;EAKhB,SAAM;;;;EACN,SAAM;;;sBAGTA,mBAAA,CAAsD;IAAnD,SAAM,wBAAwB;IAACC,KAAK,EAAC;;;kBAAxCC,UAAsD,C;;;uBAlB9DC,mBAAA,CAsBM;IAtBD,SAAM,aAAa;IAAEC,OAAK,EAAAC,MAAA,QAAAA,MAAA;MAAA,OAAEC,MAAA,CAAAC,SAAA,IAAAD,MAAA,CAAAC,SAAA,CAAAC,KAAA,CAAAF,MAAA,EAAAG,SAAA,CAAS;IAAA;IAAEC,GAAG,EAAC;MAC9CV,mBAAA,CAEM,OAFNW,UAEM,GADJC,YAAA,CAAuFC,oBAAA;IAA5EC,KAAK,EAAC,MAAM;IAACC,MAAM,EAAC,MAAM;IAACC,GAAG,EAAC,OAAO;IAAEC,GAAG,EAAEC,MAAA,CAAAC,OAAO,CAACC,MAAM;IAAE,cAAY,EAAZ;sCAE1EpB,mBAAA,CAiBM,OAjBNqB,UAiBM,GAhBJrB,mBAAA,CAGM,OAHNsB,UAGM,GAFJtB,mBAAA,CAAyC,KAAzCuB,UAAyC,EAAAC,gBAAA,CAAtBN,MAAA,CAAAC,OAAO,CAACM,OAAO,kBAClCzB,mBAAA,CAAoD,WAAAwB,gBAAA,CAA9CN,MAAA,CAAAC,OAAO,CAACO,QAAQ,IAAG,GAAC,GAAAF,gBAAA,CAAGN,MAAA,CAAAC,OAAO,CAACQ,MAAM,IAAG,IAAE,gB,GAElD3B,mBAAA,CAWM,OAXN4B,UAWM,GAVJ5B,mBAAA,CAEM,cADJA,mBAAA,CAAyF;IAAtF,SAAK6B,eAAA,EAAC,mBAAmB,EAASX,MAAA,CAAAC,OAAO,CAACW,MAAM;6BAE1CZ,MAAA,CAAAa,UAAU,I,cAArB5B,mBAAA,CAGM;;IAHkBC,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAA2B,cAAA,WAAAC,MAAA;MAAA,OAAO3B,MAAA,CAAA4B,QAAQ,CAAChB,MAAA,CAAAC,OAAO,CAACgB,KAAK;IAAA;IAAG,SAAKN,eAAA,EAAC,UAAU,EAASO,IAAA,CAAAC,OAAO;MAC7CD,IAAA,CAAAC,OAAO,I,cAArDlC,mBAAA,CAA2D,KAA3DmC,UAA2D,M,cAC3DnC,mBAAA,CAAmD,KAAnDoC,UAAmD,G,mCAErDpC,mBAAA,CAEM;;IAFD,SAAM,aAAa;IAASC,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAA2B,cAAA,WAAAC,MAAA;MAAA,OAAO3B,MAAA,CAAAkC,OAAO,CAACtB,MAAA,CAAAC,OAAO,CAACgB,KAAK;IAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}