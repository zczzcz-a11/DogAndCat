{"ast":null,"code":"import _slicedToArray from \"E:/vue3/pet-home-master/pet-client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.array.reduce.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.find.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.array.some.js\";\nimport { createVNode as _createVNode } from \"vue\";\nimport { defineComponent } from \"vue\";\nimport { FORM_KEY, truthProp, numericProp, preventDefault, createNamespace } from \"../utils/index.mjs\";\nimport { useChildren } from \"@vant/use\";\nimport { useExpose } from \"../composables/use-expose.mjs\";\nvar _createNamespace = createNamespace(\"form\"),\n  _createNamespace2 = _slicedToArray(_createNamespace, 2),\n  name = _createNamespace2[0],\n  bem = _createNamespace2[1];\nvar formProps = {\n  colon: Boolean,\n  disabled: Boolean,\n  readonly: Boolean,\n  showError: Boolean,\n  labelWidth: numericProp,\n  labelAlign: String,\n  inputAlign: String,\n  scrollToError: Boolean,\n  validateFirst: Boolean,\n  submitOnEnter: truthProp,\n  showErrorMessage: truthProp,\n  errorMessageAlign: String,\n  validateTrigger: {\n    type: [String, Array],\n    \"default\": \"onBlur\"\n  }\n};\nvar stdin_default = defineComponent({\n  name: name,\n  props: formProps,\n  emits: [\"submit\", \"failed\"],\n  setup: function setup(props, _ref) {\n    var emit = _ref.emit,\n      slots = _ref.slots;\n    var _useChildren = useChildren(FORM_KEY),\n      children = _useChildren.children,\n      linkChildren = _useChildren.linkChildren;\n    var getFieldsByNames = function getFieldsByNames(names) {\n      if (names) {\n        return children.filter(function (field) {\n          return names.includes(field.name);\n        });\n      }\n      return children;\n    };\n    var validateSeq = function validateSeq(names) {\n      return new Promise(function (resolve, reject) {\n        var errors = [];\n        var fields = getFieldsByNames(names);\n        fields.reduce(function (promise, field) {\n          return promise.then(function () {\n            if (!errors.length) {\n              return field.validate().then(function (error) {\n                if (error) {\n                  errors.push(error);\n                }\n              });\n            }\n          });\n        }, Promise.resolve()).then(function () {\n          if (errors.length) {\n            reject(errors);\n          } else {\n            resolve();\n          }\n        });\n      });\n    };\n    var validateAll = function validateAll(names) {\n      return new Promise(function (resolve, reject) {\n        var fields = getFieldsByNames(names);\n        Promise.all(fields.map(function (item) {\n          return item.validate();\n        })).then(function (errors) {\n          errors = errors.filter(Boolean);\n          if (errors.length) {\n            reject(errors);\n          } else {\n            resolve();\n          }\n        });\n      });\n    };\n    var validateField = function validateField(name2) {\n      var matched = children.find(function (item) {\n        return item.name === name2;\n      });\n      if (matched) {\n        return new Promise(function (resolve, reject) {\n          matched.validate().then(function (error) {\n            if (error) {\n              reject(error);\n            } else {\n              resolve();\n            }\n          });\n        });\n      }\n      return Promise.reject();\n    };\n    var validate = function validate(name2) {\n      if (typeof name2 === \"string\") {\n        return validateField(name2);\n      }\n      return props.validateFirst ? validateSeq(name2) : validateAll(name2);\n    };\n    var resetValidation = function resetValidation(name2) {\n      if (typeof name2 === \"string\") {\n        name2 = [name2];\n      }\n      var fields = getFieldsByNames(name2);\n      fields.forEach(function (item) {\n        item.resetValidation();\n      });\n    };\n    var getValidationStatus = function getValidationStatus() {\n      return children.reduce(function (form, field) {\n        form[field.name] = field.getValidationStatus();\n        return form;\n      }, {});\n    };\n    var scrollToField = function scrollToField(name2, options) {\n      children.some(function (item) {\n        if (item.name === name2) {\n          item.$el.scrollIntoView(options);\n          return true;\n        }\n        return false;\n      });\n    };\n    var getValues = function getValues() {\n      return children.reduce(function (form, field) {\n        form[field.name] = field.formValue.value;\n        return form;\n      }, {});\n    };\n    var submit = function submit() {\n      var values = getValues();\n      validate().then(function () {\n        return emit(\"submit\", values);\n      })[\"catch\"](function (errors) {\n        emit(\"failed\", {\n          values: values,\n          errors: errors\n        });\n        if (props.scrollToError && errors[0].name) {\n          scrollToField(errors[0].name);\n        }\n      });\n    };\n    var onSubmit = function onSubmit(event) {\n      preventDefault(event);\n      submit();\n    };\n    linkChildren({\n      props: props\n    });\n    useExpose({\n      submit: submit,\n      validate: validate,\n      getValues: getValues,\n      scrollToField: scrollToField,\n      resetValidation: resetValidation,\n      getValidationStatus: getValidationStatus\n    });\n    return function () {\n      var _a;\n      return _createVNode(\"form\", {\n        \"class\": bem(),\n        \"onSubmit\": onSubmit\n      }, [(_a = slots[\"default\"]) == null ? void 0 : _a.call(slots)]);\n    };\n  }\n});\nexport { stdin_default as default };","map":{"version":3,"names":["createVNode","_createVNode","defineComponent","FORM_KEY","truthProp","numericProp","preventDefault","createNamespace","useChildren","useExpose","_createNamespace","_createNamespace2","_slicedToArray","name","bem","formProps","colon","Boolean","disabled","readonly","showError","labelWidth","labelAlign","String","inputAlign","scrollToError","validateFirst","submitOnEnter","showErrorMessage","errorMessageAlign","validateTrigger","type","Array","stdin_default","props","emits","setup","_ref","emit","slots","_useChildren","children","linkChildren","getFieldsByNames","names","filter","field","includes","validateSeq","Promise","resolve","reject","errors","fields","reduce","promise","then","length","validate","error","push","validateAll","all","map","item","validateField","name2","matched","find","resetValidation","forEach","getValidationStatus","form","scrollToField","options","some","$el","scrollIntoView","getValues","formValue","value","submit","values","onSubmit","event","_a","call","default"],"sources":["E:/vue3/pet-home-master/pet-client/node_modules/vant/es/form/Form.mjs"],"sourcesContent":["import { createVNode as _createVNode } from \"vue\";\nimport { defineComponent } from \"vue\";\nimport { FORM_KEY, truthProp, numericProp, preventDefault, createNamespace } from \"../utils/index.mjs\";\nimport { useChildren } from \"@vant/use\";\nimport { useExpose } from \"../composables/use-expose.mjs\";\nconst [name, bem] = createNamespace(\"form\");\nconst formProps = {\n  colon: Boolean,\n  disabled: Boolean,\n  readonly: Boolean,\n  showError: Boolean,\n  labelWidth: numericProp,\n  labelAlign: String,\n  inputAlign: String,\n  scrollToError: Boolean,\n  validateFirst: Boolean,\n  submitOnEnter: truthProp,\n  showErrorMessage: truthProp,\n  errorMessageAlign: String,\n  validateTrigger: {\n    type: [String, Array],\n    default: \"onBlur\"\n  }\n};\nvar stdin_default = defineComponent({\n  name,\n  props: formProps,\n  emits: [\"submit\", \"failed\"],\n  setup(props, {\n    emit,\n    slots\n  }) {\n    const {\n      children,\n      linkChildren\n    } = useChildren(FORM_KEY);\n    const getFieldsByNames = (names) => {\n      if (names) {\n        return children.filter((field) => names.includes(field.name));\n      }\n      return children;\n    };\n    const validateSeq = (names) => new Promise((resolve, reject) => {\n      const errors = [];\n      const fields = getFieldsByNames(names);\n      fields.reduce((promise, field) => promise.then(() => {\n        if (!errors.length) {\n          return field.validate().then((error) => {\n            if (error) {\n              errors.push(error);\n            }\n          });\n        }\n      }), Promise.resolve()).then(() => {\n        if (errors.length) {\n          reject(errors);\n        } else {\n          resolve();\n        }\n      });\n    });\n    const validateAll = (names) => new Promise((resolve, reject) => {\n      const fields = getFieldsByNames(names);\n      Promise.all(fields.map((item) => item.validate())).then((errors) => {\n        errors = errors.filter(Boolean);\n        if (errors.length) {\n          reject(errors);\n        } else {\n          resolve();\n        }\n      });\n    });\n    const validateField = (name2) => {\n      const matched = children.find((item) => item.name === name2);\n      if (matched) {\n        return new Promise((resolve, reject) => {\n          matched.validate().then((error) => {\n            if (error) {\n              reject(error);\n            } else {\n              resolve();\n            }\n          });\n        });\n      }\n      return Promise.reject();\n    };\n    const validate = (name2) => {\n      if (typeof name2 === \"string\") {\n        return validateField(name2);\n      }\n      return props.validateFirst ? validateSeq(name2) : validateAll(name2);\n    };\n    const resetValidation = (name2) => {\n      if (typeof name2 === \"string\") {\n        name2 = [name2];\n      }\n      const fields = getFieldsByNames(name2);\n      fields.forEach((item) => {\n        item.resetValidation();\n      });\n    };\n    const getValidationStatus = () => children.reduce((form, field) => {\n      form[field.name] = field.getValidationStatus();\n      return form;\n    }, {});\n    const scrollToField = (name2, options) => {\n      children.some((item) => {\n        if (item.name === name2) {\n          item.$el.scrollIntoView(options);\n          return true;\n        }\n        return false;\n      });\n    };\n    const getValues = () => children.reduce((form, field) => {\n      form[field.name] = field.formValue.value;\n      return form;\n    }, {});\n    const submit = () => {\n      const values = getValues();\n      validate().then(() => emit(\"submit\", values)).catch((errors) => {\n        emit(\"failed\", {\n          values,\n          errors\n        });\n        if (props.scrollToError && errors[0].name) {\n          scrollToField(errors[0].name);\n        }\n      });\n    };\n    const onSubmit = (event) => {\n      preventDefault(event);\n      submit();\n    };\n    linkChildren({\n      props\n    });\n    useExpose({\n      submit,\n      validate,\n      getValues,\n      scrollToField,\n      resetValidation,\n      getValidationStatus\n    });\n    return () => {\n      var _a;\n      return _createVNode(\"form\", {\n        \"class\": bem(),\n        \"onSubmit\": onSubmit\n      }, [(_a = slots.default) == null ? void 0 : _a.call(slots)]);\n    };\n  }\n});\nexport {\n  stdin_default as default\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}