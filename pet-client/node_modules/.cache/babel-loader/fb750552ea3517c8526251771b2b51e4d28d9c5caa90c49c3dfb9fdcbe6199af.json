{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nvar _withScopeId = function _withScopeId(n) {\n  return _pushScopeId(\"data-v-0ff77f37\"), n = n(), _popScopeId(), n;\n};\nvar _hoisted_1 = {\n  \"class\": \"page\"\n};\nvar _hoisted_2 = {\n  \"class\": \"content_wrap\"\n};\nvar _hoisted_3 = {\n  \"class\": \"addBtn\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_PageHeadVue = _resolveComponent(\"PageHeadVue\");\n  var _component_van_image = _resolveComponent(\"van-image\");\n  var _component_van_field = _resolveComponent(\"van-field\");\n  var _component_van_cell_group = _resolveComponent(\"van-cell-group\");\n  var _component_van_button = _resolveComponent(\"van-button\");\n  var _component_van_form = _resolveComponent(\"van-form\");\n  var _component_SelectUserImgVue = _resolveComponent(\"SelectUserImgVue\");\n  var _component_van_popup = _resolveComponent(\"van-popup\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_PageHeadVue, {\n    name: _ctx.pageName\n  }, null, 8 /* PROPS */, [\"name\"]), _createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_van_form, {\n    onSubmit: $setup.onSubmit\n  }, {\n    \"default\": _withCtx(function () {\n      return [_createVNode(_component_van_cell_group, {\n        inset: \"\"\n      }, {\n        \"default\": _withCtx(function () {\n          return [_createVNode(_component_van_field, {\n            name: \"userImg\",\n            label: \"头像\",\n            rules: [{\n              required: false\n            }]\n          }, {\n            input: _withCtx(function () {\n              return [_createVNode(_component_van_image, {\n                width: \"2rem\",\n                height: \"2rem\",\n                fit: \"cover\",\n                src: require('@/assets/imgs/user_photo/' + _ctx.userImg + '.png'),\n                onClick: $setup.upDataImg\n              }, null, 8 /* PROPS */, [\"src\", \"onClick\"])];\n            }),\n            _: 1 /* STABLE */\n          }), _createVNode(_component_van_field, {\n            modelValue: _ctx.userName,\n            \"onUpdate:modelValue\": _cache[0] || (_cache[0] = function ($event) {\n              return _ctx.userName = $event;\n            }),\n            name: \"userName\",\n            label: \"昵称\",\n            placeholder: \"铲屎官的鼎鼎大名\",\n            maxlength: \"20\",\n            rules: [{\n              required: true,\n              message: '请填写昵称'\n            }]\n          }, null, 8 /* PROPS */, [\"modelValue\"]), _createVNode(_component_van_field, {\n            name: \"userSign\",\n            modelValue: _ctx.userSign,\n            \"onUpdate:modelValue\": _cache[1] || (_cache[1] = function ($event) {\n              return _ctx.userSign = $event;\n            }),\n            rows: \"2\",\n            autosize: \"\",\n            label: \"个人签名\",\n            type: \"textarea\",\n            maxlength: \"50\",\n            placeholder: \"书写你的养宠心情\",\n            \"show-word-limit\": \"\",\n            rules: [{\n              required: false\n            }]\n          }, null, 8 /* PROPS */, [\"modelValue\"])];\n        }),\n        _: 1 /* STABLE */\n      }), _createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_van_button, {\n        round: \"\",\n        block: \"\",\n        type: \"primary\",\n        \"native-type\": \"submit\",\n        color: \"#8d9f5e\"\n      }, {\n        \"default\": _withCtx(function () {\n          return [_createTextVNode(\" 确认修改 \")];\n        }),\n        _: 1 /* STABLE */\n      })])];\n    }),\n\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"onSubmit\"])]), _createVNode(_component_van_popup, {\n    show: _ctx.selectShow,\n    \"onUpdate:show\": _cache[2] || (_cache[2] = function ($event) {\n      return _ctx.selectShow = $event;\n    }),\n    position: \"bottom\",\n    title: \"编辑\"\n  }, {\n    \"default\": _withCtx(function () {\n      return [_createVNode(_component_SelectUserImgVue, {\n        onClose: $setup.selectClose,\n        onCurrentImg: $setup.selectImg,\n        show: _ctx.selectShow\n      }, null, 8 /* PROPS */, [\"onClose\", \"onCurrentImg\", \"show\"])];\n    }),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"show\"])]);\n}","map":{"version":3,"names":["_createElementBlock","_hoisted_1","_createVNode","_component_PageHeadVue","name","_ctx","pageName","_createElementVNode","_hoisted_2","_component_van_form","onSubmit","$setup","_component_van_cell_group","inset","_component_van_field","label","rules","required","input","_withCtx","_component_van_image","width","height","fit","src","require","userImg","onClick","upDataImg","userName","$event","placeholder","maxlength","message","userSign","rows","autosize","type","_hoisted_3","_component_van_button","round","block","color","_component_van_popup","show","selectShow","position","title","_component_SelectUserImgVue","onClose","selectClose","onCurrentImg","selectImg"],"sources":["E:\\vue3\\pet-home-master\\pet-client\\src\\pages\\updataUser\\index.vue"],"sourcesContent":["<template>\n  <div class=\"page\">\n    <PageHeadVue :name=\"pageName\" />\n\n    <div class=\"content_wrap\">\n      <van-form @submit=\"onSubmit\">\n        <van-cell-group inset>\n          <van-field name=\"userImg\" label=\"头像\" :rules=\"[{ required: false }]\">\n            <template #input>\n              <van-image width=\"2rem\" height=\"2rem\" fit=\"cover\" :src=\"require('@/assets/imgs/user_photo/' + userImg + '.png')\" @click=\"upDataImg\" />\n            </template>\n          </van-field>\n\n          <van-field v-model=\"userName\" name=\"userName\" label=\"昵称\" placeholder=\"铲屎官的鼎鼎大名\" maxlength=\"20\" :rules=\"[{ required: true, message: '请填写昵称' }]\" />\n\n          <van-field name=\"userSign\" v-model=\"userSign\" rows=\"2\" autosize label=\"个人签名\" type=\"textarea\" maxlength=\"50\" placeholder=\"书写你的养宠心情\" show-word-limit :rules=\"[{ required: false }]\" />\n        </van-cell-group>\n\n        <div class=\"addBtn\">\n          <van-button round block type=\"primary\" native-type=\"submit\" color=\"#8d9f5e\"> 确认修改 </van-button>\n        </div>\n      </van-form>\n    </div>\n\n    <van-popup v-model:show=\"selectShow\" position=\"bottom\" title=\"编辑\">\n      <SelectUserImgVue @close=\"selectClose\" @currentImg=\"selectImg\" :show=\"selectShow\" />\n    </van-popup>\n  </div>\n</template>\n\n<script>\nimport PageHeadVue from '@/components/PageHead.vue'\nimport SelectUserImgVue from './components/SelectUserImg'\nimport { userStore } from '@/store/user.js'\nimport { onMounted, reactive, toRefs } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { back } from '@/router/tool.js'\n\nexport default {\n  setup() {\n    const router = useRouter()\n    const uStore = userStore()\n    const state = reactive({\n      pageName: '编辑信息',\n      selectShow: false,\n      userImg: 'user_001',\n      userName: '',\n      userSign: ''\n    })\n\n    onMounted(() => {\n      const { name, sign, userImg } = uStore.getUserInfo()\n      state.userName = name\n      state.userSign = sign\n      state.userImg = userImg === null || userImg === '' ? 'user_001' : userImg\n    })\n\n    const onSubmit = value => {\n      uStore\n        .setUserInfoSync({\n          name: state.userName,\n          sign: state.userSign,\n          userImg: state.userImg\n        })\n        .then(res => {\n          back(router, 0)\n        })\n    }\n\n    const upDataImg = () => {\n      state.selectShow = true\n    }\n\n    const selectClose = e => {\n      state.selectShow = e\n    }\n\n    const selectImg = e => {\n      state.userImg = e\n    }\n\n    return {\n      ...toRefs(state),\n      onSubmit,\n      upDataImg,\n      selectClose,\n      selectImg\n    }\n  },\n  components: {\n    PageHeadVue,\n    SelectUserImgVue\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.page {\n  width: 100%;\n  height: 100%;\n  background-color: @primary;\n  .content_wrap {\n    width: 100%;\n    height: calc(100% - 1.6rem);\n    background-color: #fff;\n    border-radius: 32px 32px 0 0;\n    border-top: 4px solid #683931;\n    padding: 40px 0px;\n    box-sizing: border-box;\n    position: relative;\n    .addBtn {\n      width: 90%;\n      left: 50%;\n      transform: translate(-50%);\n      position: absolute;\n      bottom: 20px;\n    }\n  }\n}\n</style>\n"],"mappings":";;;;;EACO,SAAM;AAAM;;EAGV,SAAM;AAAc;;EAchB,SAAM;AAAQ;;;;;;;;;;uBAjBzBA,mBAAA,CA0BM,OA1BNC,UA0BM,GAzBJC,YAAA,CAAgCC,sBAAA;IAAlBC,IAAI,EAAEC,IAAA,CAAAC;EAAQ,mCAE5BC,mBAAA,CAkBM,OAlBNC,UAkBM,GAjBJN,YAAA,CAgBWO,mBAAA;IAhBAC,QAAM,EAAEC,MAAA,CAAAD;EAAQ;wBACzB;MAAA,OAUiB,CAVjBR,YAAA,CAUiBU,yBAAA;QAVDC,KAAK,EAAL;MAAK;4BACnB;UAAA,OAIY,CAJZX,YAAA,CAIYY,oBAAA;YAJDV,IAAI,EAAC,SAAS;YAACW,KAAK,EAAC,IAAI;YAAEC,KAAK,EAAE;cAAAC,QAAA;YAAA;;YAChCC,KAAK,EAAAC,QAAA,CACd;cAAA,OAAsI,CAAtIjB,YAAA,CAAsIkB,oBAAA;gBAA3HC,KAAK,EAAC,MAAM;gBAACC,MAAM,EAAC,MAAM;gBAACC,GAAG,EAAC,OAAO;gBAAEC,GAAG,EAAEC,OAAO,+BAA+BpB,IAAA,CAAAqB,OAAO;gBAAaC,OAAK,EAAEhB,MAAA,CAAAiB;;;;cAI7H1B,YAAA,CAAiJY,oBAAA;wBAA7HT,IAAA,CAAAwB,QAAQ;;qBAARxB,IAAA,CAAAwB,QAAQ,GAAAC,MAAA;YAAA;YAAE1B,IAAI,EAAC,UAAU;YAACW,KAAK,EAAC,IAAI;YAACgB,WAAW,EAAC,UAAU;YAACC,SAAS,EAAC,IAAI;YAAEhB,KAAK,EAAE;cAAAC,QAAA;cAAAgB,OAAA;YAAA;mDAEvG/B,YAAA,CAAoLY,oBAAA;YAAzKV,IAAI,EAAC,UAAU;wBAAUC,IAAA,CAAA6B,QAAQ;;qBAAR7B,IAAA,CAAA6B,QAAQ,GAAAJ,MAAA;YAAA;YAAEK,IAAI,EAAC,GAAG;YAACC,QAAQ,EAAR,EAAQ;YAACrB,KAAK,EAAC,MAAM;YAACsB,IAAI,EAAC,UAAU;YAACL,SAAS,EAAC,IAAI;YAACD,WAAW,EAAC,UAAU;YAAC,iBAAe,EAAf,EAAe;YAAEf,KAAK,EAAE;cAAAC,QAAA;YAAA;;;;UAG7JV,mBAAA,CAEM,OAFN+B,UAEM,GADJpC,YAAA,CAA+FqC,qBAAA;QAAnFC,KAAK,EAAL,EAAK;QAACC,KAAK,EAAL,EAAK;QAACJ,IAAI,EAAC,SAAS;QAAC,aAAW,EAAC,QAAQ;QAACK,KAAK,EAAC;;4BAAU;UAAA,OAAM,C,iBAAN,QAAM,E;;;;;;;qCAKxFxC,YAAA,CAEYyC,oBAAA;IAFOC,IAAI,EAAEvC,IAAA,CAAAwC,UAAU;;aAAVxC,IAAA,CAAAwC,UAAU,GAAAf,MAAA;IAAA;IAAEgB,QAAQ,EAAC,QAAQ;IAACC,KAAK,EAAC;;wBAC3D;MAAA,OAAoF,CAApF7C,YAAA,CAAoF8C,2BAAA;QAAjEC,OAAK,EAAEtC,MAAA,CAAAuC,WAAW;QAAGC,YAAU,EAAExC,MAAA,CAAAyC,SAAS;QAAGR,IAAI,EAAEvC,IAAA,CAAAwC"},"metadata":{},"sourceType":"module","externalDependencies":[]}