{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nvar _withScopeId = function _withScopeId(n) {\n  return _pushScopeId(\"data-v-52985c2c\"), n = n(), _popScopeId(), n;\n};\nvar _hoisted_1 = {\n  \"class\": \"page\"\n};\nvar _hoisted_2 = {\n  \"class\": \"user_wrap\"\n};\nvar _hoisted_3 = {\n  \"class\": \"img_wrap\"\n};\nvar _hoisted_4 = {\n  \"class\": \"text_wrap\"\n};\nvar _hoisted_5 = {\n  \"class\": \"name\"\n};\nvar _hoisted_6 = {\n  \"class\": \"sign\"\n};\nvar _hoisted_7 = {\n  \"class\": \"button_wrap\"\n};\nvar _hoisted_8 = {\n  \"class\": \"content_wrap\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_PageHeadVue = _resolveComponent(\"PageHeadVue\");\n  var _component_van_image = _resolveComponent(\"van-image\");\n  var _component_van_button = _resolveComponent(\"van-button\");\n  var _component_ImgGridVue = _resolveComponent(\"ImgGridVue\");\n  var _component_van_tab = _resolveComponent(\"van-tab\");\n  var _component_van_tabs = _resolveComponent(\"van-tabs\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_PageHeadVue, {\n    name: _ctx.pageName\n  }, null, 8 /* PROPS */, [\"name\"]), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_van_image, {\n    width: \"3rem\",\n    height: \"3rem\",\n    fit: \"cover\",\n    src: require('@/assets/imgs/user_photo/' + _ctx.userInfo.userimg + '.png')\n  }, null, 8 /* PROPS */, [\"src\"]), _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, _toDisplayString(_ctx.userInfo.username), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_6, _toDisplayString(_ctx.userInfo.usersign), 1 /* TEXT */)])]), _createElementVNode(\"div\", _hoisted_7, [_createVNode(_component_van_button, {\n    round: \"\",\n    block: \"\",\n    type: \"primary\",\n    \"native-type\": \"submit\",\n    color: \"#f8b158\",\n    onClick: $setup.toChatPage\n  }, {\n    \"default\": _withCtx(function () {\n      return [_createTextVNode(\" 发消息 \")];\n    }),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"onClick\"])])]), _createElementVNode(\"div\", _hoisted_8, [_createVNode(_component_van_tabs, {\n    active: \"{{ active }}\",\n    \"bind:change\": \"onChange\",\n    type: \"card\",\n    swipeable: \"\"\n  }, {\n    \"default\": _withCtx(function () {\n      return [_createVNode(_component_van_tab, {\n        title: \"他的\"\n      }, {\n        \"default\": _withCtx(function () {\n          return [_createVNode(_component_ImgGridVue, {\n            petInfo: _ctx.petInfo\n          }, null, 8 /* PROPS */, [\"petInfo\"])];\n        }),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_van_tab, {\n        title: \"喜欢\"\n      }, {\n        \"default\": _withCtx(function () {\n          return [_createVNode(_component_ImgGridVue, {\n            petInfo: _ctx.fondInfo\n          }, null, 8 /* PROPS */, [\"petInfo\"])];\n        }),\n        _: 1 /* STABLE */\n      })];\n    }),\n\n    _: 1 /* STABLE */\n  })])]);\n}","map":{"version":3,"names":["_createElementBlock","_hoisted_1","_createVNode","_component_PageHeadVue","name","_ctx","pageName","_createElementVNode","_hoisted_2","_hoisted_3","_component_van_image","width","height","fit","src","require","userInfo","userimg","_hoisted_4","_hoisted_5","_toDisplayString","username","_hoisted_6","usersign","_hoisted_7","_component_van_button","round","block","type","color","onClick","$setup","toChatPage","_hoisted_8","_component_van_tabs","active","swipeable","_component_van_tab","title","_component_ImgGridVue","petInfo","fondInfo"],"sources":["E:\\vue3\\pet-home-master\\pet-client\\src\\pages\\userSpace\\index.vue"],"sourcesContent":["<template>\n  <div class=\"page\">\n    <PageHeadVue :name=\"pageName\" />\n\n    <div class=\"user_wrap\">\n      <div class=\"img_wrap\">\n        <van-image\n          width=\"3rem\"\n          height=\"3rem\"\n          fit=\"cover\"\n          :src=\"require('@/assets/imgs/user_photo/' + userInfo.userimg + '.png')\"\n        />\n        <div class=\"text_wrap\">\n          <div class=\"name\">{{userInfo.username}}</div>\n          <div class=\"sign\">{{userInfo.usersign}}</div>\n        </div>\n      </div>\n\n      <div class=\"button_wrap\">\n        <van-button\n          round\n          block\n          type=\"primary\"\n          native-type=\"submit\"\n          color=\"#f8b158\"\n          @click=\"toChatPage\"\n        >\n          发消息\n        </van-button>\n      </div>\n    </div>\n\n    <div class=\"content_wrap\">\n      <van-tabs\n        active=\"{{ active }}\"\n        bind:change=\"onChange\"\n        type=\"card\"\n        swipeable\n      >\n        <van-tab title=\"他的\">\n          <ImgGridVue :petInfo=\"petInfo\" />\n        </van-tab>\n        <van-tab title=\"喜欢\">\n          <ImgGridVue :petInfo=\"fondInfo\"/>\n        </van-tab>\n      </van-tabs>\n    </div>\n  </div>\n</template>\n\n<script>\nimport PageHeadVue from \"@/components/PageHead.vue\";\nimport ImgGridVue from \"./components/ImgGrid\";\nimport { reactive, toRefs } from \"vue\";\nimport { useRoute, useRouter } from \"vue-router\";\nimport { userSpaceById } from '@/axios/index.js';\nimport { toRelatedPage } from \"@/router/tool.js\";\nimport { userStore } from \"@/store/user.js\";\nimport { Toast } from 'vant';\n\nexport default {\n  setup(props) {\n    const route = useRoute();\n    const router = useRouter();\n    const uStore = userStore();\n    const userId = route.query.userId;\n    const state = reactive({\n      pageName: \"个人空间\",\n      userInfo: {\n        userimg: 'user_001'\n      },\n      petInfo: [],\n      fondInfo: [],\n      queryInfo: {},\n    });\n\n    const toChatPage = () => {\n      const name = uStore.getUserName();\n      if(name === state.userInfo.username){\n        Toast.fail('不可以向自己发消息');\n      }else{\n        toRelatedPage('chatPage', router, 500, state.queryInfo);\n      }\n    }\n    \n    const userSpaceByIdSync = id => {\n      userSpaceById(id).then( res=> {\n        state.userInfo = res.data.userInfo;\n        state.petInfo = res.data.petInfo;\n        state.fondInfo = res.data.fondinfo;\n        state.queryInfo = {\n          chatId: res.data.userInfo.id,\n          chatName: res.data.userInfo.username,\n          chatImg: res.data.userInfo.userimg\n        };\n\n        uStore.getChatListSync().then(result => {\n          if(result){\n            const chatList = uStore.getChatList();\n            state.queryInfo.listId = '';\n            chatList.forEach(item => {\n              if(item.userId == state.queryInfo.chatId){\n                state.queryInfo.listId = item.id;\n              }\n            });\n          };\n        })\n      });\n    }\n    userSpaceByIdSync({userId});\n\n\n    \n    return {\n      ...toRefs(state),\n      router,      \n      toRelatedPage,\n      toChatPage,\n    };\n  },\n  components: {\n    PageHeadVue,\n    ImgGridVue,\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.page {\n  width: 100%;\n  height: 100%;\n  background-color: @primary;\n  overflow: scroll;\n  .user_wrap {\n    width: 100%;\n    height: 7rem;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-evenly;\n    align-items: center;\n    animation: circle .6s ease 0.02s 1 alternate;\n    .img_wrap {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      .van-image {\n        margin: 0 auto;\n        border-radius: 50%;\n        overflow: hidden;\n      }\n      .text_wrap {\n        margin-top: 0.3rem;\n        text-align: center;\n        .name {\n          color: #fff;\n          font-size: 0.5rem;\n          font-weight: 800;\n          line-height: 0.8rem;\n          margin: 0 auto;\n          max-width: 3rem;\n          .line-clamp1();\n        }\n        .sign {\n          max-width: 6rem;\n          line-height: 0.32rem;\n          font-size: 0.3rem;\n          color: #d1e6a1;\n          .line-clamp2();\n        }\n      }\n    }\n    .button_wrap {\n      width: 30%;\n      font-size: 0.5rem;\n      font-weight: 800;\n    }\n  }\n  .content_wrap {\n    width: 100%;\n    min-height: calc(100% - 8.6rem);\n    background-color: #fff;\n    border-radius: 32px 32px 0 0;\n    border-top: 4px solid #683931;\n    padding: 30px 0px;\n    box-sizing: border-box;\n    animation: move .7s ease 0s 1 alternate;\n    :deep(.van-tabs__wrap) {\n      height: 1rem;\n      .van-tabs__nav {\n        height: 100%;\n        padding: 0.1rem;\n        box-sizing: border-box;\n        border: none;\n        background-color: @primary;\n        border-radius: 0.5rem;\n        .van-tab {\n          font-size: 0.4rem;\n          font-weight: 800;\n          color: #fff;\n          border: none;\n          letter-spacing: 0.3rem;\n          text-indent: 0.3rem;\n        }\n        .van-tab--active {\n          color: @button-bg;\n          background-color: #fff;\n          border-radius: 0.5rem;\n        }\n      }\n    }\n  }\n}\n@keyframes move {\n  0% {\n    transform: translateY(30%);\n    opacity: .2;\n  }\n  100% {\n    transform: translateY(0);\n    opacity: 1;\n  }\n}\n@keyframes circle {\n  0% {\n    transform: scale(0.2);\n    opacity: 0;\n  }\n  100% {\n    transform: scale(1);\n    opacity: 1;\n  }\n}\n</style>\n"],"mappings":";;;;;EACO,SAAM;AAAM;;EAGV,SAAM;AAAW;;EACf,SAAM;AAAU;;EAOd,SAAM;AAAW;;EACf,SAAM;AAAM;;EACZ,SAAM;AAAM;;EAIhB,SAAM;AAAa;;EAcrB,SAAM;AAAc;;;;;;;;uBA/B3BA,mBAAA,CA8CM,OA9CNC,UA8CM,GA7CJC,YAAA,CAAgCC,sBAAA;IAAlBC,IAAI,EAAEC,IAAA,CAAAC;EAAQ,mCAE5BC,mBAAA,CA0BM,OA1BNC,UA0BM,GAzBJD,mBAAA,CAWM,OAXNE,UAWM,GAVJP,YAAA,CAKEQ,oBAAA;IAJAC,KAAK,EAAC,MAAM;IACZC,MAAM,EAAC,MAAM;IACbC,GAAG,EAAC,OAAO;IACVC,GAAG,EAAEC,OAAO,+BAA+BV,IAAA,CAAAW,QAAQ,CAACC,OAAO;oCAE9DV,mBAAA,CAGM,OAHNW,UAGM,GAFJX,mBAAA,CAA6C,OAA7CY,UAA6C,EAAAC,gBAAA,CAAzBf,IAAA,CAAAW,QAAQ,CAACK,QAAQ,kBACrCd,mBAAA,CAA6C,OAA7Ce,UAA6C,EAAAF,gBAAA,CAAzBf,IAAA,CAAAW,QAAQ,CAACO,QAAQ,iB,KAIzChB,mBAAA,CAWM,OAXNiB,UAWM,GAVJtB,YAAA,CASauB,qBAAA;IARXC,KAAK,EAAL,EAAK;IACLC,KAAK,EAAL,EAAK;IACLC,IAAI,EAAC,SAAS;IACd,aAAW,EAAC,QAAQ;IACpBC,KAAK,EAAC,SAAS;IACdC,OAAK,EAAEC,MAAA,CAAAC;;wBACT;MAAA,OAED,C,iBAFC,OAED,E;;;sCAIJzB,mBAAA,CAcM,OAdN0B,UAcM,GAbJ/B,YAAA,CAYWgC,mBAAA;IAXTC,MAAM,EAAC,cAAc;IACrB,aAAW,EAAC,UAAU;IACtBP,IAAI,EAAC,MAAM;IACXQ,SAAS,EAAT;;wBAEA;MAAA,OAEU,CAFVlC,YAAA,CAEUmC,kBAAA;QAFDC,KAAK,EAAC;MAAI;4BACjB;UAAA,OAAiC,CAAjCpC,YAAA,CAAiCqC,qBAAA;YAApBC,OAAO,EAAEnC,IAAA,CAAAmC;UAAO,qC;;;UAE/BtC,YAAA,CAEUmC,kBAAA;QAFDC,KAAK,EAAC;MAAI;4BACjB;UAAA,OAAiC,CAAjCpC,YAAA,CAAiCqC,qBAAA;YAApBC,OAAO,EAAEnC,IAAA,CAAAoC;UAAQ,qC"},"metadata":{},"sourceType":"module","externalDependencies":[]}