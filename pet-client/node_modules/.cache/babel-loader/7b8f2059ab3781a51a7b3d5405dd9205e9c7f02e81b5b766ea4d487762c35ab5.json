{"ast":null,"code":"import _objectSpread from \"E:/vue3/pet-home-master/pet-client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport { reactive, toRefs, onMounted, onBeforeUpdate } from \"vue\";\nimport { userStore } from \"@/store/user.js\";\nexport default {\n  props: {\n    show: {\n      type: Boolean\n    }\n  },\n  setup: function setup(props, ctx) {\n    var uStore = userStore(); // 仓库的上下文对象\n    var categorys = [\"犬\", \"猫\", \"鸟\", \"兔\", \"鼠\", \"鱼\"];\n    var state = reactive({\n      petInfo: {},\n      // 宠物信息\n      showPicker: false // 宠物种类面板的出现\n    });\n\n    onMounted(function () {\n      state.petInfo = uStore.getPetInfoExit();\n    });\n    onBeforeUpdate(function () {\n      state.petInfo = uStore.getPetInfoExit();\n    });\n    var cencel = function cencel() {\n      // 关闭宠物信息修改界面\n      ctx.emit(\"close\", false);\n    };\n    var onConfirm = function onConfirm(value) {\n      // 宠物种类的确定\n      state.petInfo.petcategory = value;\n      state.showPicker = false;\n      // console.log(state);\n    };\n\n    var saveInfo = function saveInfo(value) {\n      // 宠物信息修改\n      // 确认修改信息\n      ctx.emit(\"close\", false);\n      uStore.savePetInfo(state.petInfo);\n    };\n\n    // const\n\n    return _objectSpread(_objectSpread({\n      categorys: categorys\n    }, toRefs(state)), {}, {\n      cencel: cencel,\n      onConfirm: onConfirm,\n      saveInfo: saveInfo\n    });\n  }\n};","map":{"version":3,"names":["reactive","toRefs","onMounted","onBeforeUpdate","userStore","props","show","type","Boolean","setup","ctx","uStore","categorys","state","petInfo","showPicker","getPetInfoExit","cencel","emit","onConfirm","value","petcategory","saveInfo","savePetInfo","_objectSpread"],"sources":["E:\\vue3\\pet-home-master\\pet-client\\src\\pages\\myPet\\components\\ExitPetInfo.vue"],"sourcesContent":["<template>\n  <div class=\"content_wrap\" v-if=\"show\">\n    <van-row type=\"flex\" justify=\"space-between\" class=\"title\">\n      <van-col class=\"cancel\" @click=\"cencel\">取消</van-col>\n      <van-col class=\"sure\" @click=\"saveInfo\">确定</van-col>\n    </van-row>\n    <van-form>\n      <van-cell-group inset>\n        <!-- 名字 -->\n        <van-field\n          v-model=\"petInfo.petname\"\n          name=\"petName\"\n          label=\"宠物名\"\n          placeholder=\"宠物名\"\n          :rules=\"[{ required: true, message: '请填写宠物名' }]\"\n        />\n        <!-- 品种 -->\n        <van-field\n          v-model=\"petInfo.petbreed\"\n          name=\"petBreed\"\n          label=\"宠物品种\"\n          placeholder=\"请填写宠物品种，如‘柴犬’，‘金毛’\"\n          :rules=\"[{ required: true, message: '请填写宠物品种' }]\"\n        />\n        <!-- 颜色 -->\n        <van-field\n          v-model=\"petInfo.petcolor\"\n          name=\"petColor\"\n          label=\"毛色\"\n          placeholder=\"宠物毛色\"\n          :rules=\"[{ required: true, message: '请填写宠物毛色' }]\"\n        />\n        <!-- 重量 -->\n        <van-field\n          v-model=\"petInfo.petweight\"\n          name=\"petWeight\"\n          label=\"体重\"\n          type=\"number\"\n          placeholder=\"体重(kg)\"\n          :rules=\"[{ required: true, message: '请输入宠物体重' }]\"\n        />\n        <!-- 年龄 -->\n        <van-field name=\"petAge\" label=\"年龄\">\n          <template #input>\n            <van-stepper v-model=\"petInfo.petage\" />\n          </template>\n        </van-field>\n        <!-- 性别 -->\n        <van-field name=\"petSex\" label=\"性别\">\n          <template #input>\n            <van-radio-group v-model=\"petInfo.petsex\" direction=\"horizontal\">\n              <van-radio name=\"1\" checked-color=\"#8d9f5e\">雄</van-radio>\n              <van-radio name=\"2\" checked-color=\"#8d9f5e\">雌</van-radio>\n            </van-radio-group>\n          </template>\n        </van-field>\n        <!-- 种类 -->\n        <van-field\n          v-model=\"petInfo.petcategory\"\n          is-link\n          readonly\n          name=\"petCategory\"\n          label=\"种类\"\n          placeholder=\"点击选择宠物种类\"\n          @click=\"showPicker = true\"\n          :rules=\"[{ required: true, message: '请选择宠物种类' }]\"\n        />\n        <van-popup v-model:show=\"showPicker\" position=\"bottom\">\n          <van-picker\n            :columns=\"categorys\"\n            @confirm=\"onConfirm\"\n            @cancel=\"showPicker = false\"\n          />\n        </van-popup>\n        <!-- 宠物简介 -->\n        <van-field\n          name=\"petMessage\"\n          v-model=\"petInfo.petmessage\"\n          rows=\"2\"\n          autosize\n          label=\"简介\"\n          type=\"textarea\"\n          maxlength=\"100\"\n          placeholder=\"关于宠物的信息\"\n          show-word-limit\n          :rules=\"[{ required: true, message: '请填写宠物简介' }]\"\n        />\n      </van-cell-group>\n    </van-form>\n  </div>\n</template>\n\n<script>\nimport { reactive, toRefs, onMounted, onBeforeUpdate } from \"vue\";\nimport { userStore } from \"@/store/user.js\";\n\nexport default {\n  props: {\n    show: {\n      type: Boolean,\n    },\n  },\n  setup(props, ctx) {\n    const uStore = userStore(); // 仓库的上下文对象\n    const categorys = [\"犬\", \"猫\", \"鸟\", \"兔\", \"鼠\", \"鱼\"];\n    const state = reactive({\n      petInfo: {}, // 宠物信息\n      showPicker: false, // 宠物种类面板的出现\n    });\n\n    onMounted(() => {\n      state.petInfo = uStore.getPetInfoExit();\n    });\n\n    onBeforeUpdate(() => {\n      state.petInfo = uStore.getPetInfoExit();\n    });\n\n    const cencel = () => {\n      // 关闭宠物信息修改界面\n      ctx.emit(\"close\", false);\n    };\n\n    const onConfirm = (value) => {\n      // 宠物种类的确定\n      state.petInfo.petcategory = value;\n      state.showPicker = false;\n      // console.log(state);\n    };\n\n    const saveInfo = (value) => {\n      // 宠物信息修改\n      // 确认修改信息\n      ctx.emit(\"close\", false);\n      uStore.savePetInfo(state.petInfo);\n    };\n\n    // const\n\n    return {\n      categorys,\n      ...toRefs(state),\n      cencel,\n      onConfirm,\n      saveInfo,\n    };\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.content_wrap {\n  .title {\n    padding: 10px 10px;\n    .cancel {\n      color: #999;\n    }\n    .sure {\n      color: #1989fa;\n    }\n  }\n}\n</style>\n"],"mappings":";AA6FA,SAASA,QAAQ,EAAEC,MAAM,EAAEC,SAAS,EAAEC,cAAa,QAAS,KAAK;AACjE,SAASC,SAAQ,QAAS,iBAAiB;AAE3C,eAAe;EACbC,KAAK,EAAE;IACLC,IAAI,EAAE;MACJC,IAAI,EAAEC;IACR;EACF,CAAC;EACDC,KAAK,WAAAA,MAACJ,KAAK,EAAEK,GAAG,EAAE;IAChB,IAAMC,MAAK,GAAIP,SAAS,EAAE,EAAE;IAC5B,IAAMQ,SAAQ,GAAI,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;IAChD,IAAMC,KAAI,GAAIb,QAAQ,CAAC;MACrBc,OAAO,EAAE,CAAC,CAAC;MAAE;MACbC,UAAU,EAAE,KAAK,CAAE;IACrB,CAAC,CAAC;;IAEFb,SAAS,CAAC,YAAM;MACdW,KAAK,CAACC,OAAM,GAAIH,MAAM,CAACK,cAAc,EAAE;IACzC,CAAC,CAAC;IAEFb,cAAc,CAAC,YAAM;MACnBU,KAAK,CAACC,OAAM,GAAIH,MAAM,CAACK,cAAc,EAAE;IACzC,CAAC,CAAC;IAEF,IAAMC,MAAK,GAAI,SAATA,MAAKA,CAAA,EAAU;MACnB;MACAP,GAAG,CAACQ,IAAI,CAAC,OAAO,EAAE,KAAK,CAAC;IAC1B,CAAC;IAED,IAAMC,SAAQ,GAAI,SAAZA,SAAQA,CAAKC,KAAK,EAAK;MAC3B;MACAP,KAAK,CAACC,OAAO,CAACO,WAAU,GAAID,KAAK;MACjCP,KAAK,CAACE,UAAS,GAAI,KAAK;MACxB;IACF,CAAC;;IAED,IAAMO,QAAO,GAAI,SAAXA,QAAOA,CAAKF,KAAK,EAAK;MAC1B;MACA;MACAV,GAAG,CAACQ,IAAI,CAAC,OAAO,EAAE,KAAK,CAAC;MACxBP,MAAM,CAACY,WAAW,CAACV,KAAK,CAACC,OAAO,CAAC;IACnC,CAAC;;IAED;;IAEA,OAAAU,aAAA,CAAAA,aAAA;MACEZ,SAAS,EAATA;IAAS,GACNX,MAAM,CAACY,KAAK,CAAC;MAChBI,MAAM,EAANA,MAAM;MACNE,SAAS,EAATA,SAAS;MACTG,QAAQ,EAARA;IAAQ;EAEZ;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}