{"ast":null,"code":"import _slicedToArray from \"E:/vue3/pet-home-master/pet-client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport \"core-js/modules/web.timers.js\";\nimport { withDirectives as _withDirectives, vShow as _vShow, createVNode as _createVNode } from \"vue\";\nimport { ref, watch, reactive, defineComponent } from \"vue\";\nimport { isDef, createNamespace, makeNumericProp } from \"../utils/index.mjs\";\nimport { raf, useRect, doubleRaf, useEventListener, onMountedOrActivated } from \"@vant/use\";\nimport { useExpose } from \"../composables/use-expose.mjs\";\nimport { onPopupReopen } from \"../composables/on-popup-reopen.mjs\";\nimport { Icon } from \"../icon/index.mjs\";\nvar _createNamespace = createNamespace(\"notice-bar\"),\n  _createNamespace2 = _slicedToArray(_createNamespace, 2),\n  name = _createNamespace2[0],\n  bem = _createNamespace2[1];\nvar noticeBarProps = {\n  text: String,\n  mode: String,\n  color: String,\n  delay: makeNumericProp(1),\n  speed: makeNumericProp(60),\n  leftIcon: String,\n  wrapable: Boolean,\n  background: String,\n  scrollable: {\n    type: Boolean,\n    \"default\": null\n  }\n};\nvar stdin_default = defineComponent({\n  name: name,\n  props: noticeBarProps,\n  emits: [\"close\", \"replay\"],\n  setup: function setup(props, _ref) {\n    var emit = _ref.emit,\n      slots = _ref.slots;\n    var wrapWidth = 0;\n    var contentWidth = 0;\n    var startTimer;\n    var wrapRef = ref();\n    var contentRef = ref();\n    var state = reactive({\n      show: true,\n      offset: 0,\n      duration: 0\n    });\n    var renderLeftIcon = function renderLeftIcon() {\n      if (slots[\"left-icon\"]) {\n        return slots[\"left-icon\"]();\n      }\n      if (props.leftIcon) {\n        return _createVNode(Icon, {\n          \"class\": bem(\"left-icon\"),\n          \"name\": props.leftIcon\n        }, null);\n      }\n    };\n    var getRightIconName = function getRightIconName() {\n      if (props.mode === \"closeable\") {\n        return \"cross\";\n      }\n      if (props.mode === \"link\") {\n        return \"arrow\";\n      }\n    };\n    var onClickRightIcon = function onClickRightIcon(event) {\n      if (props.mode === \"closeable\") {\n        state.show = false;\n        emit(\"close\", event);\n      }\n    };\n    var renderRightIcon = function renderRightIcon() {\n      if (slots[\"right-icon\"]) {\n        return slots[\"right-icon\"]();\n      }\n      var name2 = getRightIconName();\n      if (name2) {\n        return _createVNode(Icon, {\n          \"name\": name2,\n          \"class\": bem(\"right-icon\"),\n          \"onClick\": onClickRightIcon\n        }, null);\n      }\n    };\n    var onTransitionEnd = function onTransitionEnd() {\n      state.offset = wrapWidth;\n      state.duration = 0;\n      raf(function () {\n        doubleRaf(function () {\n          state.offset = -contentWidth;\n          state.duration = (contentWidth + wrapWidth) / +props.speed;\n          emit(\"replay\");\n        });\n      });\n    };\n    var renderMarquee = function renderMarquee() {\n      var ellipsis = props.scrollable === false && !props.wrapable;\n      var style = {\n        transform: state.offset ? \"translateX(\".concat(state.offset, \"px)\") : \"\",\n        transitionDuration: \"\".concat(state.duration, \"s\")\n      };\n      return _createVNode(\"div\", {\n        \"ref\": wrapRef,\n        \"role\": \"marquee\",\n        \"class\": bem(\"wrap\")\n      }, [_createVNode(\"div\", {\n        \"ref\": contentRef,\n        \"style\": style,\n        \"class\": [bem(\"content\"), {\n          \"van-ellipsis\": ellipsis\n        }],\n        \"onTransitionend\": onTransitionEnd\n      }, [slots[\"default\"] ? slots[\"default\"]() : props.text])]);\n    };\n    var reset = function reset() {\n      var delay = props.delay,\n        speed = props.speed,\n        scrollable = props.scrollable;\n      var ms = isDef(delay) ? +delay * 1e3 : 0;\n      wrapWidth = 0;\n      contentWidth = 0;\n      state.offset = 0;\n      state.duration = 0;\n      clearTimeout(startTimer);\n      startTimer = setTimeout(function () {\n        if (!wrapRef.value || !contentRef.value || scrollable === false) {\n          return;\n        }\n        var wrapRefWidth = useRect(wrapRef).width;\n        var contentRefWidth = useRect(contentRef).width;\n        if (scrollable || contentRefWidth > wrapRefWidth) {\n          doubleRaf(function () {\n            wrapWidth = wrapRefWidth;\n            contentWidth = contentRefWidth;\n            state.offset = -contentWidth;\n            state.duration = contentWidth / +speed;\n          });\n        }\n      }, ms);\n    };\n    onPopupReopen(reset);\n    onMountedOrActivated(reset);\n    useEventListener(\"pageshow\", reset);\n    useExpose({\n      reset: reset\n    });\n    watch(function () {\n      return [props.text, props.scrollable];\n    }, reset);\n    return function () {\n      var color = props.color,\n        wrapable = props.wrapable,\n        background = props.background;\n      return _withDirectives(_createVNode(\"div\", {\n        \"role\": \"alert\",\n        \"class\": bem({\n          wrapable: wrapable\n        }),\n        \"style\": {\n          color: color,\n          background: background\n        }\n      }, [renderLeftIcon(), renderMarquee(), renderRightIcon()]), [[_vShow, state.show]]);\n    };\n  }\n});\nexport { stdin_default as default };","map":{"version":3,"names":["withDirectives","_withDirectives","vShow","_vShow","createVNode","_createVNode","ref","watch","reactive","defineComponent","isDef","createNamespace","makeNumericProp","raf","useRect","doubleRaf","useEventListener","onMountedOrActivated","useExpose","onPopupReopen","Icon","_createNamespace","_createNamespace2","_slicedToArray","name","bem","noticeBarProps","text","String","mode","color","delay","speed","leftIcon","wrapable","Boolean","background","scrollable","type","stdin_default","props","emits","setup","_ref","emit","slots","wrapWidth","contentWidth","startTimer","wrapRef","contentRef","state","show","offset","duration","renderLeftIcon","getRightIconName","onClickRightIcon","event","renderRightIcon","name2","onTransitionEnd","renderMarquee","ellipsis","style","transform","concat","transitionDuration","reset","ms","clearTimeout","setTimeout","value","wrapRefWidth","width","contentRefWidth","default"],"sources":["E:/vue3/pet-home-master/pet-client/node_modules/vant/es/notice-bar/NoticeBar.mjs"],"sourcesContent":["import { withDirectives as _withDirectives, vShow as _vShow, createVNode as _createVNode } from \"vue\";\nimport { ref, watch, reactive, defineComponent } from \"vue\";\nimport { isDef, createNamespace, makeNumericProp } from \"../utils/index.mjs\";\nimport { raf, useRect, doubleRaf, useEventListener, onMountedOrActivated } from \"@vant/use\";\nimport { useExpose } from \"../composables/use-expose.mjs\";\nimport { onPopupReopen } from \"../composables/on-popup-reopen.mjs\";\nimport { Icon } from \"../icon/index.mjs\";\nconst [name, bem] = createNamespace(\"notice-bar\");\nconst noticeBarProps = {\n  text: String,\n  mode: String,\n  color: String,\n  delay: makeNumericProp(1),\n  speed: makeNumericProp(60),\n  leftIcon: String,\n  wrapable: Boolean,\n  background: String,\n  scrollable: {\n    type: Boolean,\n    default: null\n  }\n};\nvar stdin_default = defineComponent({\n  name,\n  props: noticeBarProps,\n  emits: [\"close\", \"replay\"],\n  setup(props, {\n    emit,\n    slots\n  }) {\n    let wrapWidth = 0;\n    let contentWidth = 0;\n    let startTimer;\n    const wrapRef = ref();\n    const contentRef = ref();\n    const state = reactive({\n      show: true,\n      offset: 0,\n      duration: 0\n    });\n    const renderLeftIcon = () => {\n      if (slots[\"left-icon\"]) {\n        return slots[\"left-icon\"]();\n      }\n      if (props.leftIcon) {\n        return _createVNode(Icon, {\n          \"class\": bem(\"left-icon\"),\n          \"name\": props.leftIcon\n        }, null);\n      }\n    };\n    const getRightIconName = () => {\n      if (props.mode === \"closeable\") {\n        return \"cross\";\n      }\n      if (props.mode === \"link\") {\n        return \"arrow\";\n      }\n    };\n    const onClickRightIcon = (event) => {\n      if (props.mode === \"closeable\") {\n        state.show = false;\n        emit(\"close\", event);\n      }\n    };\n    const renderRightIcon = () => {\n      if (slots[\"right-icon\"]) {\n        return slots[\"right-icon\"]();\n      }\n      const name2 = getRightIconName();\n      if (name2) {\n        return _createVNode(Icon, {\n          \"name\": name2,\n          \"class\": bem(\"right-icon\"),\n          \"onClick\": onClickRightIcon\n        }, null);\n      }\n    };\n    const onTransitionEnd = () => {\n      state.offset = wrapWidth;\n      state.duration = 0;\n      raf(() => {\n        doubleRaf(() => {\n          state.offset = -contentWidth;\n          state.duration = (contentWidth + wrapWidth) / +props.speed;\n          emit(\"replay\");\n        });\n      });\n    };\n    const renderMarquee = () => {\n      const ellipsis = props.scrollable === false && !props.wrapable;\n      const style = {\n        transform: state.offset ? `translateX(${state.offset}px)` : \"\",\n        transitionDuration: `${state.duration}s`\n      };\n      return _createVNode(\"div\", {\n        \"ref\": wrapRef,\n        \"role\": \"marquee\",\n        \"class\": bem(\"wrap\")\n      }, [_createVNode(\"div\", {\n        \"ref\": contentRef,\n        \"style\": style,\n        \"class\": [bem(\"content\"), {\n          \"van-ellipsis\": ellipsis\n        }],\n        \"onTransitionend\": onTransitionEnd\n      }, [slots.default ? slots.default() : props.text])]);\n    };\n    const reset = () => {\n      const {\n        delay,\n        speed,\n        scrollable\n      } = props;\n      const ms = isDef(delay) ? +delay * 1e3 : 0;\n      wrapWidth = 0;\n      contentWidth = 0;\n      state.offset = 0;\n      state.duration = 0;\n      clearTimeout(startTimer);\n      startTimer = setTimeout(() => {\n        if (!wrapRef.value || !contentRef.value || scrollable === false) {\n          return;\n        }\n        const wrapRefWidth = useRect(wrapRef).width;\n        const contentRefWidth = useRect(contentRef).width;\n        if (scrollable || contentRefWidth > wrapRefWidth) {\n          doubleRaf(() => {\n            wrapWidth = wrapRefWidth;\n            contentWidth = contentRefWidth;\n            state.offset = -contentWidth;\n            state.duration = contentWidth / +speed;\n          });\n        }\n      }, ms);\n    };\n    onPopupReopen(reset);\n    onMountedOrActivated(reset);\n    useEventListener(\"pageshow\", reset);\n    useExpose({\n      reset\n    });\n    watch(() => [props.text, props.scrollable], reset);\n    return () => {\n      const {\n        color,\n        wrapable,\n        background\n      } = props;\n      return _withDirectives(_createVNode(\"div\", {\n        \"role\": \"alert\",\n        \"class\": bem({\n          wrapable\n        }),\n        \"style\": {\n          color,\n          background\n        }\n      }, [renderLeftIcon(), renderMarquee(), renderRightIcon()]), [[_vShow, state.show]]);\n    };\n  }\n});\nexport {\n  stdin_default as default\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}