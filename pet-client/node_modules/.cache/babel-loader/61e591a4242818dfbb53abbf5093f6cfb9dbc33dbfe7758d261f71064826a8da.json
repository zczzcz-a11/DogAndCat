{"ast":null,"code":"import _typeof from \"E:/vue3/pet-home-master/pet-client/node_modules/@babel/runtime/helpers/esm/typeof.js\";\nimport \"core-js/modules/es.object.create.js\";\nimport \"core-js/modules/es.reflect.get.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.reflect.to-string-tag.js\";\nimport \"core-js/modules/es.array.reduce.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.regexp.test.js\";\nimport \"core-js/modules/es.array.is-array.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\n// src/normalize.ts\nfunction isObject(v) {\n  return _typeof(v) === \"object\" && v !== null;\n}\nfunction normalizeOptions(options, factoryOptions) {\n  options = isObject(options) ? options : /* @__PURE__ */Object.create(null);\n  return new Proxy(options, {\n    get: function get(target, key, receiver) {\n      if (key === \"key\") return Reflect.get(target, key, receiver);\n      return Reflect.get(target, key, receiver) || Reflect.get(factoryOptions, key, receiver);\n    }\n  });\n}\n\n// src/pick.ts\nfunction get(state, path) {\n  return path.reduce(function (obj, p) {\n    return obj == null ? void 0 : obj[p];\n  }, state);\n}\nfunction set(state, path, val) {\n  return path.slice(0, -1).reduce(function (obj, p) {\n    if (/^(__proto__)$/.test(p)) return {};else return obj[p] = obj[p] || {};\n  }, state)[path[path.length - 1]] = val, state;\n}\nfunction pick(baseState, paths) {\n  return paths.reduce(function (substate, path) {\n    var pathArray = path.split(\".\");\n    return set(substate, pathArray, get(baseState, pathArray));\n  }, {});\n}\n\n// src/plugin.ts\nfunction hydrateStore(store, _ref) {\n  var storage = _ref.storage,\n    serializer = _ref.serializer,\n    key = _ref.key,\n    debug = _ref.debug;\n  try {\n    var fromStorage = storage == null ? void 0 : storage.getItem(key);\n    if (fromStorage) store.$patch(serializer == null ? void 0 : serializer.deserialize(fromStorage));\n  } catch (error) {\n    if (debug) console.error(error);\n  }\n}\nfunction persistState(state, _ref2) {\n  var storage = _ref2.storage,\n    serializer = _ref2.serializer,\n    key = _ref2.key,\n    paths = _ref2.paths,\n    debug = _ref2.debug;\n  try {\n    var toStore = Array.isArray(paths) ? pick(state, paths) : state;\n    storage.setItem(key, serializer.serialize(toStore));\n  } catch (error) {\n    if (debug) console.error(error);\n  }\n}\nfunction createPersistedState() {\n  var factoryOptions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return function (context) {\n    var _factoryOptions$auto = factoryOptions.auto,\n      auto = _factoryOptions$auto === void 0 ? false : _factoryOptions$auto;\n    var _context$options$pers = context.options.persist,\n      persist = _context$options$pers === void 0 ? auto : _context$options$pers,\n      store = context.store;\n    if (!persist) return;\n    var persistences = (Array.isArray(persist) ? persist.map(function (p) {\n      return normalizeOptions(p, factoryOptions);\n    }) : [normalizeOptions(persist, factoryOptions)]).map(function (_ref3) {\n      var _ref3$storage = _ref3.storage,\n        storage = _ref3$storage === void 0 ? localStorage : _ref3$storage,\n        _ref3$beforeRestore = _ref3.beforeRestore,\n        beforeRestore = _ref3$beforeRestore === void 0 ? null : _ref3$beforeRestore,\n        _ref3$afterRestore = _ref3.afterRestore,\n        afterRestore = _ref3$afterRestore === void 0 ? null : _ref3$afterRestore,\n        _ref3$serializer = _ref3.serializer,\n        serializer = _ref3$serializer === void 0 ? {\n          serialize: JSON.stringify,\n          deserialize: JSON.parse\n        } : _ref3$serializer,\n        _ref3$key = _ref3.key,\n        key = _ref3$key === void 0 ? store.$id : _ref3$key,\n        _ref3$paths = _ref3.paths,\n        paths = _ref3$paths === void 0 ? null : _ref3$paths,\n        _ref3$debug = _ref3.debug,\n        debug = _ref3$debug === void 0 ? false : _ref3$debug;\n      var _a;\n      return {\n        storage: storage,\n        beforeRestore: beforeRestore,\n        afterRestore: afterRestore,\n        serializer: serializer,\n        key: ((_a = factoryOptions.key) != null ? _a : function (k) {\n          return k;\n        })(key),\n        paths: paths,\n        debug: debug\n      };\n    });\n    store.$persist = function () {\n      persistences.forEach(function (persistence) {\n        persistState(store.$state, persistence);\n      });\n    };\n    store.$hydrate = function () {\n      var _ref4 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        _ref4$runHooks = _ref4.runHooks,\n        runHooks = _ref4$runHooks === void 0 ? true : _ref4$runHooks;\n      persistences.forEach(function (persistence) {\n        var beforeRestore = persistence.beforeRestore,\n          afterRestore = persistence.afterRestore;\n        if (runHooks) beforeRestore == null ? void 0 : beforeRestore(context);\n        hydrateStore(store, persistence);\n        if (runHooks) afterRestore == null ? void 0 : afterRestore(context);\n      });\n    };\n    persistences.forEach(function (persistence) {\n      var beforeRestore = persistence.beforeRestore,\n        afterRestore = persistence.afterRestore;\n      beforeRestore == null ? void 0 : beforeRestore(context);\n      hydrateStore(store, persistence);\n      afterRestore == null ? void 0 : afterRestore(context);\n      store.$subscribe(function (_mutation, state) {\n        persistState(state, persistence);\n      }, {\n        detached: true\n      });\n    });\n  };\n}\n\n// src/index.ts\nvar src_default = createPersistedState();\nexport { createPersistedState, src_default as default };","map":{"version":3,"names":["isObject","v","_typeof","normalizeOptions","options","factoryOptions","Object","create","Proxy","get","target","key","receiver","Reflect","state","path","reduce","obj","p","set","val","slice","test","length","pick","baseState","paths","substate","pathArray","split","hydrateStore","store","_ref","storage","serializer","debug","fromStorage","getItem","$patch","deserialize","error","console","persistState","_ref2","toStore","Array","isArray","setItem","serialize","createPersistedState","arguments","undefined","context","_factoryOptions$auto","auto","_context$options$pers","persist","persistences","map","_ref3","_ref3$storage","localStorage","_ref3$beforeRestore","beforeRestore","_ref3$afterRestore","afterRestore","_ref3$serializer","JSON","stringify","parse","_ref3$key","$id","_ref3$paths","_ref3$debug","_a","k","$persist","forEach","persistence","$state","$hydrate","_ref4","_ref4$runHooks","runHooks","$subscribe","_mutation","detached","src_default","default"],"sources":["E:/vue3/pet-home-master/pet-client/node_modules/pinia-plugin-persistedstate/dist/index.mjs"],"sourcesContent":["// src/normalize.ts\nfunction isObject(v) {\n  return typeof v === \"object\" && v !== null;\n}\nfunction normalizeOptions(options, factoryOptions) {\n  options = isObject(options) ? options : /* @__PURE__ */ Object.create(null);\n  return new Proxy(options, {\n    get(target, key, receiver) {\n      if (key === \"key\")\n        return Reflect.get(target, key, receiver);\n      return Reflect.get(target, key, receiver) || Reflect.get(factoryOptions, key, receiver);\n    }\n  });\n}\n\n// src/pick.ts\nfunction get(state, path) {\n  return path.reduce((obj, p) => {\n    return obj == null ? void 0 : obj[p];\n  }, state);\n}\nfunction set(state, path, val) {\n  return path.slice(0, -1).reduce((obj, p) => {\n    if (/^(__proto__)$/.test(p))\n      return {};\n    else\n      return obj[p] = obj[p] || {};\n  }, state)[path[path.length - 1]] = val, state;\n}\nfunction pick(baseState, paths) {\n  return paths.reduce((substate, path) => {\n    const pathArray = path.split(\".\");\n    return set(substate, pathArray, get(baseState, pathArray));\n  }, {});\n}\n\n// src/plugin.ts\nfunction hydrateStore(store, { storage, serializer, key, debug }) {\n  try {\n    const fromStorage = storage == null ? void 0 : storage.getItem(key);\n    if (fromStorage)\n      store.$patch(serializer == null ? void 0 : serializer.deserialize(fromStorage));\n  } catch (error) {\n    if (debug)\n      console.error(error);\n  }\n}\nfunction persistState(state, { storage, serializer, key, paths, debug }) {\n  try {\n    const toStore = Array.isArray(paths) ? pick(state, paths) : state;\n    storage.setItem(key, serializer.serialize(toStore));\n  } catch (error) {\n    if (debug)\n      console.error(error);\n  }\n}\nfunction createPersistedState(factoryOptions = {}) {\n  return (context) => {\n    const { auto = false } = factoryOptions;\n    const {\n      options: { persist = auto },\n      store\n    } = context;\n    if (!persist)\n      return;\n    const persistences = (Array.isArray(persist) ? persist.map((p) => normalizeOptions(p, factoryOptions)) : [normalizeOptions(persist, factoryOptions)]).map(\n      ({\n        storage = localStorage,\n        beforeRestore = null,\n        afterRestore = null,\n        serializer = {\n          serialize: JSON.stringify,\n          deserialize: JSON.parse\n        },\n        key = store.$id,\n        paths = null,\n        debug = false\n      }) => {\n        var _a;\n        return {\n          storage,\n          beforeRestore,\n          afterRestore,\n          serializer,\n          key: ((_a = factoryOptions.key) != null ? _a : (k) => k)(key),\n          paths,\n          debug\n        };\n      }\n    );\n    store.$persist = () => {\n      persistences.forEach((persistence) => {\n        persistState(store.$state, persistence);\n      });\n    };\n    store.$hydrate = ({ runHooks = true } = {}) => {\n      persistences.forEach((persistence) => {\n        const { beforeRestore, afterRestore } = persistence;\n        if (runHooks)\n          beforeRestore == null ? void 0 : beforeRestore(context);\n        hydrateStore(store, persistence);\n        if (runHooks)\n          afterRestore == null ? void 0 : afterRestore(context);\n      });\n    };\n    persistences.forEach((persistence) => {\n      const { beforeRestore, afterRestore } = persistence;\n      beforeRestore == null ? void 0 : beforeRestore(context);\n      hydrateStore(store, persistence);\n      afterRestore == null ? void 0 : afterRestore(context);\n      store.$subscribe(\n        (_mutation, state) => {\n          persistState(state, persistence);\n        },\n        {\n          detached: true\n        }\n      );\n    });\n  };\n}\n\n// src/index.ts\nvar src_default = createPersistedState();\nexport {\n  createPersistedState,\n  src_default as default\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}