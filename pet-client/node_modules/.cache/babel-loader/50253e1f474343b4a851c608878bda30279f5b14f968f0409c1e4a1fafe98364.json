{"ast":null,"code":"import _objectSpread from \"E:/vue3/pet-home-master/pet-client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport PageHeadVue from '@/components/PageHead.vue';\nimport SelectUserImgVue from './components/SelectUserImg';\nimport { userStore } from '@/store/user.js';\nimport { onMounted, reactive, toRefs } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { back } from '@/router/tool.js';\nexport default {\n  setup: function setup() {\n    var router = useRouter();\n    var uStore = userStore();\n    var state = reactive({\n      pageName: '编辑信息',\n      selectShow: false,\n      userImg: 'user_001',\n      userName: '',\n      userSign: ''\n    });\n    onMounted(function () {\n      var _uStore$getUserInfo = uStore.getUserInfo(),\n        name = _uStore$getUserInfo.name,\n        sign = _uStore$getUserInfo.sign,\n        userImg = _uStore$getUserInfo.userImg;\n      state.userName = name;\n      state.userSign = sign;\n      state.userImg = userImg === null || userImg === '' ? 'user_001' : userImg;\n    });\n    var onSubmit = function onSubmit(value) {\n      uStore.setUserInfoSync({\n        name: state.userName,\n        sign: state.userSign,\n        userImg: state.userImg\n      }).then(function (res) {\n        back(router, 0);\n      });\n    };\n    var upDataImg = function upDataImg() {\n      state.selectShow = true;\n    };\n    var selectClose = function selectClose(e) {\n      state.selectShow = e;\n    };\n    var selectImg = function selectImg(e) {\n      state.userImg = e;\n    };\n    return _objectSpread(_objectSpread({}, toRefs(state)), {}, {\n      onSubmit: onSubmit,\n      upDataImg: upDataImg,\n      selectClose: selectClose,\n      selectImg: selectImg\n    });\n  },\n  components: {\n    PageHeadVue: PageHeadVue,\n    SelectUserImgVue: SelectUserImgVue\n  }\n};","map":{"version":3,"names":["PageHeadVue","SelectUserImgVue","userStore","onMounted","reactive","toRefs","useRouter","back","setup","router","uStore","state","pageName","selectShow","userImg","userName","userSign","_uStore$getUserInfo","getUserInfo","name","sign","onSubmit","value","setUserInfoSync","then","res","upDataImg","selectClose","e","selectImg","_objectSpread","components"],"sources":["E:\\vue3\\pet-home-master\\pet-client\\src\\pages\\updataUser\\index.vue"],"sourcesContent":["<template>\n  <div class=\"page\">\n    <PageHeadVue :name=\"pageName\" />\n\n    <div class=\"content_wrap\">\n      <van-form @submit=\"onSubmit\">\n        <van-cell-group inset>\n          <van-field name=\"userImg\" label=\"头像\" :rules=\"[{ required: false }]\">\n            <template #input>\n              <van-image width=\"2rem\" height=\"2rem\" fit=\"cover\" :src=\"require('@/assets/imgs/user_photo/' + userImg + '.png')\" @click=\"upDataImg\" />\n            </template>\n          </van-field>\n\n          <van-field v-model=\"userName\" name=\"userName\" label=\"昵称\" placeholder=\"铲屎官的鼎鼎大名\" maxlength=\"20\" :rules=\"[{ required: true, message: '请填写昵称' }]\" />\n\n          <van-field name=\"userSign\" v-model=\"userSign\" rows=\"2\" autosize label=\"个人签名\" type=\"textarea\" maxlength=\"50\" placeholder=\"书写你的养宠心情\" show-word-limit :rules=\"[{ required: false }]\" />\n        </van-cell-group>\n\n        <div class=\"addBtn\">\n          <van-button round block type=\"primary\" native-type=\"submit\" color=\"#8d9f5e\"> 确认修改 </van-button>\n        </div>\n      </van-form>\n    </div>\n\n    <van-popup v-model:show=\"selectShow\" position=\"bottom\" title=\"编辑\">\n      <SelectUserImgVue @close=\"selectClose\" @currentImg=\"selectImg\" :show=\"selectShow\" />\n    </van-popup>\n  </div>\n</template>\n\n<script>\nimport PageHeadVue from '@/components/PageHead.vue'\nimport SelectUserImgVue from './components/SelectUserImg'\nimport { userStore } from '@/store/user.js'\nimport { onMounted, reactive, toRefs } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { back } from '@/router/tool.js'\n\nexport default {\n  setup() {\n    const router = useRouter()\n    const uStore = userStore()\n    const state = reactive({\n      pageName: '编辑信息',\n      selectShow: false,\n      userImg: 'user_001',\n      userName: '',\n      userSign: ''\n    })\n\n    onMounted(() => {\n      const { name, sign, userImg } = uStore.getUserInfo()\n      state.userName = name\n      state.userSign = sign\n      state.userImg = userImg === null || userImg === '' ? 'user_001' : userImg\n    })\n\n    const onSubmit = value => {\n      uStore\n        .setUserInfoSync({\n          name: state.userName,\n          sign: state.userSign,\n          userImg: state.userImg\n        })\n        .then(res => {\n          back(router, 0)\n        })\n    }\n\n    const upDataImg = () => {\n      state.selectShow = true\n    }\n\n    const selectClose = e => {\n      state.selectShow = e\n    }\n\n    const selectImg = e => {\n      state.userImg = e\n    }\n\n    return {\n      ...toRefs(state),\n      onSubmit,\n      upDataImg,\n      selectClose,\n      selectImg\n    }\n  },\n  components: {\n    PageHeadVue,\n    SelectUserImgVue\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.page {\n  width: 100%;\n  height: 100%;\n  background-color: @primary;\n  .content_wrap {\n    width: 100%;\n    height: calc(100% - 1.6rem);\n    background-color: #fff;\n    border-radius: 32px 32px 0 0;\n    border-top: 4px solid #683931;\n    padding: 40px 0px;\n    box-sizing: border-box;\n    position: relative;\n    .addBtn {\n      width: 90%;\n      left: 50%;\n      transform: translate(-50%);\n      position: absolute;\n      bottom: 20px;\n    }\n  }\n}\n</style>\n"],"mappings":";;AA+BA,OAAOA,WAAU,MAAO,2BAA0B;AAClD,OAAOC,gBAAe,MAAO,4BAA2B;AACxD,SAASC,SAAQ,QAAS,iBAAgB;AAC1C,SAASC,SAAS,EAAEC,QAAQ,EAAEC,MAAK,QAAS,KAAI;AAChD,SAASC,SAAQ,QAAS,YAAW;AACrC,SAASC,IAAG,QAAS,kBAAiB;AAEtC,eAAe;EACbC,KAAK,WAAAA,MAAA,EAAG;IACN,IAAMC,MAAK,GAAIH,SAAS,EAAC;IACzB,IAAMI,MAAK,GAAIR,SAAS,EAAC;IACzB,IAAMS,KAAI,GAAIP,QAAQ,CAAC;MACrBQ,QAAQ,EAAE,MAAM;MAChBC,UAAU,EAAE,KAAK;MACjBC,OAAO,EAAE,UAAU;MACnBC,QAAQ,EAAE,EAAE;MACZC,QAAQ,EAAE;IACZ,CAAC;IAEDb,SAAS,CAAC,YAAM;MACd,IAAAc,mBAAA,GAAgCP,MAAM,CAACQ,WAAW,EAAC;QAA3CC,IAAI,GAAAF,mBAAA,CAAJE,IAAI;QAAEC,IAAI,GAAAH,mBAAA,CAAJG,IAAI;QAAEN,OAAM,GAAAG,mBAAA,CAANH,OAAM;MAC1BH,KAAK,CAACI,QAAO,GAAII,IAAG;MACpBR,KAAK,CAACK,QAAO,GAAII,IAAG;MACpBT,KAAK,CAACG,OAAM,GAAIA,OAAM,KAAM,IAAG,IAAKA,OAAM,KAAM,EAAC,GAAI,UAAS,GAAIA,OAAM;IAC1E,CAAC;IAED,IAAMO,QAAO,GAAI,SAAXA,QAAOA,CAAIC,KAAI,EAAK;MACxBZ,MAAK,CACFa,eAAe,CAAC;QACfJ,IAAI,EAAER,KAAK,CAACI,QAAQ;QACpBK,IAAI,EAAET,KAAK,CAACK,QAAQ;QACpBF,OAAO,EAAEH,KAAK,CAACG;MACjB,CAAC,EACAU,IAAI,CAAC,UAAAC,GAAE,EAAK;QACXlB,IAAI,CAACE,MAAM,EAAE,CAAC;MAChB,CAAC;IACL;IAEA,IAAMiB,SAAQ,GAAI,SAAZA,SAAQA,CAAA,EAAU;MACtBf,KAAK,CAACE,UAAS,GAAI,IAAG;IACxB;IAEA,IAAMc,WAAU,GAAI,SAAdA,WAAUA,CAAIC,CAAA,EAAK;MACvBjB,KAAK,CAACE,UAAS,GAAIe,CAAA;IACrB;IAEA,IAAMC,SAAQ,GAAI,SAAZA,SAAQA,CAAID,CAAA,EAAK;MACrBjB,KAAK,CAACG,OAAM,GAAIc,CAAA;IAClB;IAEA,OAAAE,aAAA,CAAAA,aAAA,KACKzB,MAAM,CAACM,KAAK,CAAC;MAChBU,QAAQ,EAARA,QAAQ;MACRK,SAAS,EAATA,SAAS;MACTC,WAAW,EAAXA,WAAW;MACXE,SAAQ,EAARA;IAAQ;EAEZ,CAAC;EACDE,UAAU,EAAE;IACV/B,WAAW,EAAXA,WAAW;IACXC,gBAAe,EAAfA;EACF;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}