{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, openBlock as _openBlock, createBlock as _createBlock, Fragment as _Fragment, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nimport _imports_0 from '@/assets/icons/login.svg';\nvar _withScopeId = function _withScopeId(n) {\n  return _pushScopeId(\"data-v-37dfd6fc\"), n = n(), _popScopeId(), n;\n};\nvar _hoisted_1 = {\n  \"class\": \"page\"\n};\nvar _hoisted_2 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"div\", {\n    \"class\": \"header\"\n  }, [/*#__PURE__*/_createElementVNode(\"p\", null, \"Hello!\"), /*#__PURE__*/_createElementVNode(\"p\", null, \"Good to see you here\")], -1 /* HOISTED */);\n});\nvar _hoisted_3 = {\n  \"class\": \"main_wrap\"\n};\nvar _hoisted_4 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"img\", {\n    src: _imports_0,\n    \"class\": \"login_icon\"\n  }, null, -1 /* HOISTED */);\n});\nvar _hoisted_5 = {\n  style: {\n    \"margin\": \"16px\"\n  }\n};\nvar _hoisted_6 = {\n  style: {\n    \"margin\": \"16px\"\n  }\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_van_field = _resolveComponent(\"van-field\");\n  var _component_van_cell_group = _resolveComponent(\"van-cell-group\");\n  var _component_van_button = _resolveComponent(\"van-button\");\n  var _component_van_form = _resolveComponent(\"van-form\");\n  var _component_VueImageVerifyVue = _resolveComponent(\"VueImageVerifyVue\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _createElementVNode(\"div\", _hoisted_3, [_hoisted_4, _createCommentVNode(\" login \"), _ctx.type === 'login' ? (_openBlock(), _createBlock(_component_van_form, {\n    key: 0,\n    onSubmit: $setup.onSubmit,\n    \"class\": \"form\"\n  }, {\n    \"default\": _withCtx(function () {\n      return [_createVNode(_component_van_cell_group, {\n        inset: \"\"\n      }, {\n        \"default\": _withCtx(function () {\n          return [_createVNode(_component_van_field, {\n            modelValue: _ctx.username,\n            \"onUpdate:modelValue\": _cache[0] || (_cache[0] = function ($event) {\n              return _ctx.username = $event;\n            }),\n            name: \"username\",\n            label: \"用户名\",\n            placeholder: \"用户名\",\n            rules: [{\n              required: true,\n              message: '请填写用户名'\n            }]\n          }, null, 8 /* PROPS */, [\"modelValue\"]), _createVNode(_component_van_field, {\n            modelValue: _ctx.password,\n            \"onUpdate:modelValue\": _cache[1] || (_cache[1] = function ($event) {\n              return _ctx.password = $event;\n            }),\n            type: \"password\",\n            name: \"password\",\n            label: \"密码\",\n            placeholder: \"密码\",\n            rules: [{\n              required: true,\n              message: '请填写密码'\n            }]\n          }, null, 8 /* PROPS */, [\"modelValue\"])];\n        }),\n        _: 1 /* STABLE */\n      }), _createElementVNode(\"div\", _hoisted_5, [_createVNode(_component_van_button, {\n        round: \"\",\n        block: \"\",\n        type: \"primary\",\n        \"native-type\": \"submit\",\n        \"class\": \"login_btn\"\n      }, {\n        \"default\": _withCtx(function () {\n          return [_createTextVNode(\"登录\")];\n        }),\n        _: 1 /* STABLE */\n      }), _createElementVNode(\"p\", {\n        \"class\": \"change_btn\",\n        onClick: _cache[2] || (_cache[2] = function ($event) {\n          return $setup.changType('register');\n        })\n      }, \"没有账号，前往注册\")])];\n    }),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"onSubmit\"])) : (_openBlock(), _createElementBlock(_Fragment, {\n    key: 1\n  }, [_createCommentVNode(\" register \"), _createVNode(_component_van_form, {\n    onSubmit: $setup.onSubmit,\n    \"class\": \"form\"\n  }, {\n    \"default\": _withCtx(function () {\n      return [_createVNode(_component_van_cell_group, {\n        inset: \"\"\n      }, {\n        \"default\": _withCtx(function () {\n          return [_createVNode(_component_van_field, {\n            modelValue: _ctx.username,\n            \"onUpdate:modelValue\": _cache[3] || (_cache[3] = function ($event) {\n              return _ctx.username = $event;\n            }),\n            name: \"username\",\n            label: \"用户名\",\n            placeholder: \"用户名\",\n            rules: [{\n              required: true,\n              message: '请填写用户名'\n            }]\n          }, null, 8 /* PROPS */, [\"modelValue\"]), _createVNode(_component_van_field, {\n            modelValue: _ctx.password,\n            \"onUpdate:modelValue\": _cache[4] || (_cache[4] = function ($event) {\n              return _ctx.password = $event;\n            }),\n            type: \"password\",\n            name: \"password\",\n            label: \"密码\",\n            placeholder: \"密码\",\n            rules: [{\n              required: true,\n              message: '请填写密码'\n            }]\n          }, null, 8 /* PROPS */, [\"modelValue\"]), _createVNode(_component_van_field, {\n            modelValue: _ctx.verify,\n            \"onUpdate:modelValue\": _cache[5] || (_cache[5] = function ($event) {\n              return _ctx.verify = $event;\n            }),\n            name: \"verify\",\n            label: \"验证码\",\n            placeholder: \"验证码\",\n            rules: [{\n              required: true,\n              message: '请填写验证码'\n            }]\n          }, {\n            button: _withCtx(function () {\n              return [_createVNode(_component_VueImageVerifyVue, {\n                ref: \"verifyRef\",\n                onSendImgCode: $setup.getImgCode\n              }, null, 8 /* PROPS */, [\"onSendImgCode\"])];\n            }),\n            _: 1 /* STABLE */\n          }, 8 /* PROPS */, [\"modelValue\"])];\n        }),\n        _: 1 /* STABLE */\n      }), _createElementVNode(\"div\", _hoisted_6, [_createVNode(_component_van_button, {\n        round: \"\",\n        block: \"\",\n        type: \"primary\",\n        \"native-type\": \"submit\",\n        \"class\": \"login_btn\"\n      }, {\n        \"default\": _withCtx(function () {\n          return [_createTextVNode(\"注册\")];\n        }),\n        _: 1 /* STABLE */\n      }), _createElementVNode(\"p\", {\n        \"class\": \"change_btn\",\n        onClick: _cache[6] || (_cache[6] = function ($event) {\n          return $setup.changType('login');\n        })\n      }, \"已有账号，点击登录\")])];\n    }),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"onSubmit\"])], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))])]);\n}","map":{"version":3,"names":["_imports_0","_createElementVNode","src","style","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_createCommentVNode","_ctx","type","_createBlock","_component_van_form","onSubmit","$setup","_createVNode","_component_van_cell_group","inset","_component_van_field","username","$event","name","label","placeholder","rules","required","message","password","_hoisted_5","_component_van_button","round","block","onClick","_cache","changType","_Fragment","key","verify","button","_withCtx","_component_VueImageVerifyVue","ref","onSendImgCode","getImgCode","_hoisted_6"],"sources":["E:\\vue3\\pet-home-master\\pet-client\\src\\views\\login\\index.vue"],"sourcesContent":["<template>\n  <div class=\"page\">\n    <div class=\"header\">\n      <p>Hello!</p>\n      <p>Good to see you here</p>\n    </div>\n\n    <div class=\"main_wrap\">\n      <img src=\"@/assets/icons/login.svg\" class=\"login_icon\" />\n\n      <!-- login -->\n      <van-form @submit=\"onSubmit\" v-if=\"type === 'login'\" class=\"form\">\n        <van-cell-group inset>\n          <van-field v-model=\"username\" name=\"username\" label=\"用户名\" placeholder=\"用户名\" :rules=\"[{ required: true, message: '请填写用户名' }]\" />\n          <van-field v-model=\"password\" type=\"password\" name=\"password\" label=\"密码\" placeholder=\"密码\" :rules=\"[{ required: true, message: '请填写密码' }]\" />\n        </van-cell-group>\n        <div style=\"margin: 16px\">\n          <van-button round block type=\"primary\" native-type=\"submit\" class=\"login_btn\">登录</van-button>\n          <p class=\"change_btn\" @click=\"changType('register')\">没有账号，前往注册</p>\n        </div>\n      </van-form>\n\n      <!-- register -->\n      <van-form @submit=\"onSubmit\" v-else class=\"form\">\n        <van-cell-group inset>\n          <van-field v-model=\"username\" name=\"username\" label=\"用户名\" placeholder=\"用户名\" :rules=\"[{ required: true, message: '请填写用户名' }]\" />\n          <van-field v-model=\"password\" type=\"password\" name=\"password\" label=\"密码\" placeholder=\"密码\" :rules=\"[{ required: true, message: '请填写密码' }]\" />\n          <van-field v-model=\"verify\" name=\"verify\" label=\"验证码\" placeholder=\"验证码\" :rules=\"[{ required: true, message: '请填写验证码' }]\">\n            <template #button>\n              <VueImageVerifyVue ref=\"verifyRef\" @sendImgCode=\"getImgCode\" />\n            </template>\n          </van-field>\n        </van-cell-group>\n        <div style=\"margin: 16px\">\n          <van-button round block type=\"primary\" native-type=\"submit\" class=\"login_btn\">注册</van-button>\n          <p class=\"change_btn\" @click=\"changType('login')\">已有账号，点击登录</p>\n        </div>\n      </van-form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { reactive, toRefs, ref } from 'vue'\nimport { useRouter } from 'vue-router'\nimport VueImageVerifyVue from './components/VueImageVerify.vue'\nimport { login, register } from '@/axios/index.js'\nimport { Toast } from 'vant'\nimport { userStore } from '@/store/user.js'\n\nexport default {\n  components: {\n    // Header,\n    VueImageVerifyVue\n  },\n  setup() {\n    const router = useRouter() // 得到路由实例\n    const verifyRef = ref(null)\n    const uStore = userStore() // 仓库的上下文对象\n    const state = reactive({\n      username: '',\n      password: '',\n      verify: '',\n      imgCode: '',\n      type: 'login'\n    })\n\n    // 登录或注册信息提交\n    const onSubmit = () => {\n      if (state.type == 'login') {\n        // 登录按钮\n        uStore.loginByUserNameSync(state.username, state.password).then(res => {\n          Toast.success(res)\n          router.push('/home')\n        })\n      } else {\n        // 注册按钮\n        if (state.verify !== state.imgCode) {\n          Toast.fail('验证码错误')\n          return\n        }\n        register({\n          username: state.username,\n          password: state.password,\n          userimg: 'user_001',\n          usersign: '今日份营业汪 ! ! !'\n        }).then(res => {\n          if (res.code) Toast.success(res.mess)\n          state.type = 'login'\n        })\n      }\n    }\n\n    // 切换登录注册\n    const changType = type => {\n      state.type = type\n    }\n\n    // 获取子组件传递过来的imgCode\n    const getImgCode = val => {\n      state.imgCode = val\n      console.log(state.imgCode)\n    }\n\n    return {\n      ...toRefs(state),\n      onSubmit,\n      changType,\n      verifyRef,\n      getImgCode\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.page {\n  width: 100%;\n  height: 100%;\n  background-color: @primary;\n  .header {\n    width: 100%;\n    padding: 20px;\n    box-sizing: border-box;\n    font-size: 35px;\n    color: #fff;\n    p:last-child {\n      font-size: 18px;\n      margin-top: 10px;\n    }\n  }\n  .main_wrap {\n    width: 100%;\n    height: calc(100% - 200px);\n    position: absolute;\n    bottom: 0;\n    background-color: #fff;\n    border-radius: 47px 47px 0 0;\n    border-top: 4px solid #683931;\n    .login_icon {\n      position: absolute;\n      bottom: 100%;\n      right: 0;\n      transform: translate(-12%, 25%);\n    }\n    .form {\n      margin-top: 1rem;\n      .login_btn {\n        margin-top: 1rem;\n        background-color: @primary;\n        border: none;\n      }\n      .change_btn {\n        text-align: center;\n        margin: 1rem 0;\n        color: @primary;\n        font-size: 14px;\n      }\n    }\n  }\n}\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}