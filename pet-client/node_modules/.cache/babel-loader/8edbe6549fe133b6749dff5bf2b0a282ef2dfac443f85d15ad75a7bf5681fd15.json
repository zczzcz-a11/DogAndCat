{"ast":null,"code":"import \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport config from './config.js';\nimport { Toast } from 'vant';\nimport router from '@/router/index.js';\nexport default function $axios(options) {\n  return new Promise(function (resolve, reject) {\n    var instance = axios.create({\n      baseURL: config.baseUrl,\n      timeout: config.timeout,\n      headers: {}\n    });\n\n    // 请求拦截\n    instance.interceptors.request.use(function (conf) {\n      // 带上 token 给后端\n      conf.headers['Authorization'] = \"\".concat(localStorage.getItem('token') || '');\n      return conf;\n    }, function (error) {\n      console.log(666);\n      console.log(error);\n    });\n\n    // 响应拦截\n    instance.interceptors.response.use(function (response) {\n      var data = response.data;\n      if (data.code !== 200) {\n        // 业务逻辑错误\n        if (data.mess) Toast.fail(data.mess);\n        return Promise.reject(data);\n      }\n      return data;\n    }, function (err) {\n      // 后端服务器错误\n      if (err && err.response) {\n        switch (err.response.status) {\n          case 400:\n            err.mess = '请求错误';\n            break;\n          case 401:\n            err.mess = '账号已过期,请重新登录';\n            Toast.fail(err.mess);\n            router.push('/login');\n            break;\n          case 404:\n            err.mess = '请求地址错误';\n            break;\n          default:\n        }\n      }\n      return Promise.reject(err);\n    });\n\n    // 发生请求\n    instance(options).then(function (res) {\n      resolve(res);\n    })[\"catch\"](function (error) {\n      reject(error);\n    });\n  });\n}","map":{"version":3,"names":["axios","config","Toast","router","$axios","options","Promise","resolve","reject","instance","create","baseURL","baseUrl","timeout","headers","interceptors","request","use","conf","concat","localStorage","getItem","error","console","log","response","data","code","mess","fail","err","status","push","then","res"],"sources":["E:/vue3/pet-home-master/pet-client/src/axios/api.js"],"sourcesContent":["import axios from 'axios'\nimport config from './config.js'\nimport { Toast } from 'vant'\nimport router from '@/router/index.js'\n\nexport default function $axios(options) {\n  return new Promise((resolve, reject) => {\n    const instance = axios.create({\n      baseURL: config.baseUrl,\n      timeout: config.timeout,\n      headers: {}\n    })\n\n    // 请求拦截\n    instance.interceptors.request.use(\n      conf => {\n        // 带上 token 给后端\n        conf.headers['Authorization'] = `${localStorage.getItem('token') || ''}`\n        return conf\n      },\n      error => {\n        console.log(666)\n        console.log(error)\n      }\n    )\n\n    // 响应拦截\n    instance.interceptors.response.use(\n      response => {\n        let data = response.data\n        if (data.code !== 200) {\n          // 业务逻辑错误\n          if (data.mess) Toast.fail(data.mess)\n          return Promise.reject(data)\n        }\n        return data\n      },\n      err => {\n        // 后端服务器错误\n        if (err && err.response) {\n          switch (err.response.status) {\n            case 400:\n              err.mess = '请求错误'\n              break\n            case 401:\n              err.mess = '账号已过期,请重新登录'\n              Toast.fail(err.mess)\n              router.push('/login')\n              break\n            case 404:\n              err.mess = '请求地址错误'\n              break\n            default:\n          }\n        }\n        return Promise.reject(err)\n      }\n    )\n\n    // 发生请求\n    instance(options)\n      .then(res => {\n        resolve(res)\n      })\n      .catch(error => {\n        reject(error)\n      })\n  })\n}\n"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,MAAM,MAAM,aAAa;AAChC,SAASC,KAAK,QAAQ,MAAM;AAC5B,OAAOC,MAAM,MAAM,mBAAmB;AAEtC,eAAe,SAASC,MAAMA,CAACC,OAAO,EAAE;EACtC,OAAO,IAAIC,OAAO,CAAC,UAACC,OAAO,EAAEC,MAAM,EAAK;IACtC,IAAMC,QAAQ,GAAGT,KAAK,CAACU,MAAM,CAAC;MAC5BC,OAAO,EAAEV,MAAM,CAACW,OAAO;MACvBC,OAAO,EAAEZ,MAAM,CAACY,OAAO;MACvBC,OAAO,EAAE,CAAC;IACZ,CAAC,CAAC;;IAEF;IACAL,QAAQ,CAACM,YAAY,CAACC,OAAO,CAACC,GAAG,CAC/B,UAAAC,IAAI,EAAI;MACN;MACAA,IAAI,CAACJ,OAAO,CAAC,eAAe,CAAC,MAAAK,MAAA,CAAMC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,IAAI,EAAE,CAAE;MACxE,OAAOH,IAAI;IACb,CAAC,EACD,UAAAI,KAAK,EAAI;MACPC,OAAO,CAACC,GAAG,CAAC,GAAG,CAAC;MAChBD,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;IACpB,CAAC,CACF;;IAED;IACAb,QAAQ,CAACM,YAAY,CAACU,QAAQ,CAACR,GAAG,CAChC,UAAAQ,QAAQ,EAAI;MACV,IAAIC,IAAI,GAAGD,QAAQ,CAACC,IAAI;MACxB,IAAIA,IAAI,CAACC,IAAI,KAAK,GAAG,EAAE;QACrB;QACA,IAAID,IAAI,CAACE,IAAI,EAAE1B,KAAK,CAAC2B,IAAI,CAACH,IAAI,CAACE,IAAI,CAAC;QACpC,OAAOtB,OAAO,CAACE,MAAM,CAACkB,IAAI,CAAC;MAC7B;MACA,OAAOA,IAAI;IACb,CAAC,EACD,UAAAI,GAAG,EAAI;MACL;MACA,IAAIA,GAAG,IAAIA,GAAG,CAACL,QAAQ,EAAE;QACvB,QAAQK,GAAG,CAACL,QAAQ,CAACM,MAAM;UACzB,KAAK,GAAG;YACND,GAAG,CAACF,IAAI,GAAG,MAAM;YACjB;UACF,KAAK,GAAG;YACNE,GAAG,CAACF,IAAI,GAAG,aAAa;YACxB1B,KAAK,CAAC2B,IAAI,CAACC,GAAG,CAACF,IAAI,CAAC;YACpBzB,MAAM,CAAC6B,IAAI,CAAC,QAAQ,CAAC;YACrB;UACF,KAAK,GAAG;YACNF,GAAG,CAACF,IAAI,GAAG,QAAQ;YACnB;UACF;QAAQ;MAEZ;MACA,OAAOtB,OAAO,CAACE,MAAM,CAACsB,GAAG,CAAC;IAC5B,CAAC,CACF;;IAED;IACArB,QAAQ,CAACJ,OAAO,CAAC,CACd4B,IAAI,CAAC,UAAAC,GAAG,EAAI;MACX3B,OAAO,CAAC2B,GAAG,CAAC;IACd,CAAC,CAAC,SACI,CAAC,UAAAZ,KAAK,EAAI;MACdd,MAAM,CAACc,KAAK,CAAC;IACf,CAAC,CAAC;EACN,CAAC,CAAC;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}